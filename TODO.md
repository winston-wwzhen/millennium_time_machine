# 功能迭代注意事项

本文档记录项目后续开发时需要注意的迭代事项和待办事项。

## 彩蛋系统集成

### ⚠️ 重要：添加新彩蛋时必须更新彩蛋大全

当实现以下菜单/功能时，如果添加了新的彩蛋，**必须同步更新以下文件**：

1. **彩蛋定义文件**：`miniprogram/utils/egg-system.js`
   - 在 `EGG_IDS` 中添加新的彩蛋ID
   - 在 `EGG_CONFIG` 中添加彩蛋配置（名称、描述、稀有度、奖励）

2. **彩蛋大全显示**：`miniprogram/components/text-file-viewer/index.wxml`
   - 在对应稀有度分组中添加彩蛋名称
   - 确保显示格式一致：`图标 彩蛋名称`

### 当前彩蛋分类

- **【普通彩蛋】**：7个
  - 🦁 舞动的小狮子
  - 💬 它会说话
  - 📂 底部秘密
  - 🎨 换了个心情
  - 🗑️ 垃圾清理员
  - 💻 电脑专家
  - 🌐 网瘾少年

- **【稀有彩蛋】**：3个
  - 💻 那个年代的噩梦
  - 👁️ 消失的角落
  - ⏰ 特殊时刻

- **【史诗彩蛋】**：1个
  - 🌙 深夜党专属

- **【传说彩蛋】**：1个
  - 🎮 传说中的秘籍

### 待实现的菜单项

以下菜单项在实现时，考虑是否需要添加彩蛋：

#### 我的文档
- [x] 彩蛋文件夹
  - [x] 彩蛋秘籍-第一册.txt（已实现，显示所有彩蛋列表）
  - [x] 日记.txt - 已实现操作日志记录功能
    - 记录用户打开/关闭组件的操作
    - 云函数: `user` → `addLog`, `getLogs`
    - 组件: `diary-viewer` 显示操作日志
    - 数据库集合: `user_activity_logs`
  - [x] 帮助窗口 - 已实现Win98风格帮助窗口
  - [ ] 非主流签名.doc - 可添加查看签名的彩蛋
  - [ ] 我的图片 - 可添加浏览图片的彩蛋
  - [ ] 我的音乐 - 可添加播放音乐的彩蛋
  - [ ] 我的视频 - 可添加观看视频的彩蛋

#### 我的电脑
- [x] C盘点击彩蛋（已实现）
- [ ] D盘功能
- [ ] USB设备功能
- [ ] 系统信息查看

#### 网管系统
- [x] 网管插件 - 已实现右上角便利贴样式余额显示
- [ ] 双代币相关操作彩蛋

#### 回收站
- [x] 回收站点击彩蛋（已实现）
- [ ] 清空回收站功能
- [ ] 恢复文件功能

#### 浏览器
- [x] 浏览器点击彩蛋（已实现）
- [ ] 网页浏览功能
- [ ] 收藏夹功能

#### 其他桌面图标
- [ ] QCIO - 已有完整功能
- [ ] 如果当时 - 已有完整功能
- [ ] 非主流相机 - 已有完整功能

#### 开始菜单程序
- [x] 俄罗斯方块 - 已删除
- [x] 星际探索 - 已有页面
- [x] 火星翻译 - 已有页面
- [ ] 可考虑添加启动程序的彩蛋

### 组件化进度

- [x] 我的文档 → 组件化
- [x] 我的电脑 → 组件化
- [x] 网管系统 → 组件化
- [ ] 回收站 → 待组件化
- [ ] 浏览器 → 待组件化

## 开发提醒

1. **z-index 层级管理**（动态管理）
   - 使用全局计数器 `baseZIndex`，起始值 2000
   - 每次打开组件递增 10
   - 网管插件: 80（固定，始终在底层）
   - 桌面组件（我的电脑、我的文档、网管系统）: 2000+（动态）
   - 子组件（彩蛋文件夹、文本查看器）: 2100+（基于父组件）

2. **命名规范**
   - 组件文件: kebab-case (如 `text-file-viewer`)
   - 组件类名: kebab-case 或 camelCase
   - 事件处理: `on` 开头 (如 `onClose`, `onTap`)

3. **彩蛋触发方式参考**
   - 点击类: 点击 N 次
   - 长按类: 长按触发
   - 时间类: 特定时间
   - 序列类: 按顺序操作
   - 组合类: 组合操作

4. **每次添加新功能时**
   - 检查是否应该添加对应的彩蛋
   - 如果添加彩蛋，同步更新 `egg-system.js` 和 `text-file-viewer/index.wxml`
   - 测试彩蛋触发是否正常
   - 更新本文档

## 最近完成的更新 (v3.0)

- [x] 网管系统插件：右上角便利贴样式，显示网费和时光币
- [x] 音量切换：任务栏音响图标可切换静音/开启
- [x] 动态z-index：桌面组件自动层级管理
- [x] 我的文档帮助窗口：Win98风格完整说明
- [x] 文件名更新：彩蛋秘籍1.txt → 彩蛋秘籍-第一册.txt

---

最后更新: 2025-12-27（v3.0 - 网管插件、音量切换、动态层级）
