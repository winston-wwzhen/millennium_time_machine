# åƒç¦§æ—¶å…‰æœº - æ•°æ®åº“è®¾è®¡æ–‡æ¡£

## æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº†"åƒç¦§æ—¶å…‰æœº"å¾®ä¿¡å°ç¨‹åºä½¿ç”¨çš„æ‰€æœ‰æ•°æ®åº“è¡¨ç»“æ„ã€å­—æ®µè¯´æ˜åŠå…¶å…³è”å…³ç³»ã€‚

---

## æ•°æ®åº“è¡¨æ¸…å•

| è¡¨å | ç”¨é€” | äº‘å‡½æ•° |
|------|------|--------|
| `users` | ç”¨æˆ·åŸºç¡€ä¿¡æ¯ | user |
| `qcio_users` | QCIO è´¦å·ä¿¡æ¯ | qcio |
| `qcio_ai_contacts` | AI å¥½å‹åˆ—è¡¨ | qcio |
| `qcio_groups` | ç¾¤èŠåˆ—è¡¨ | qcio |
| `qcio_mood_logs` | ç”¨æˆ·å¿ƒæƒ…æ—¥å¿— | qcio |
| `qcio_chat_history` | å•äººèŠå¤©å†å² | qcio |
| `qcio_group_chat_history` | ç¾¤èŠå†å² | qcio |
| `qcio_guestbook` | ç©ºé—´ç•™è¨€æ¿ | qcio |
| `mood_garden` | å¿ƒæƒ…å†œåœºæ¸¸æˆçŠ¶æ€ | mood_logic |
| `qcio_farm_profiles` | QCIOå†œåœºæ¡£æ¡ˆï¼ˆç­‰çº§ã€ç»éªŒã€åœŸåœ°æ•°é‡ï¼‰ | qcio |
| `qcio_farm_plots` | QCIOå†œåœºåœŸåœ°çŠ¶æ€ï¼ˆä½œç‰©ä¿¡æ¯ã€ç”Ÿé•¿è¿›åº¦ï¼‰ | qcio |
| `qcio_farm_inventory` | QCIOå†œåœºä»“åº“ï¼ˆç§å­ã€ä½œç‰©ã€è£…é¥°ï¼‰ | qcio |
| `qcio_farm_logs` | QCIOå†œåœºæ“ä½œè®°å½• | qcio |
| `qcio_wallet` | ç”¨æˆ·é’±åŒ…ï¼ˆé‡‘å¸ã€Qç‚¹ï¼‰ | qcio |
| `qcio_transactions` | äº¤æ˜“è®°å½• | qcio |
| `qcio_daily_tasks` | æ¯æ—¥ä»»åŠ¡è®°å½• | qcio |
| `qcio_vip_codes` | VIPå…‘æ¢ç  | qcio |
| `qcio_vip_records` | VIPå¼€é€šè®°å½• | qcio |
| `qcio_achievements` | æˆå°±å®šä¹‰ | qcio |
| `qcio_user_achievements` | ç”¨æˆ·æˆå°±è®°å½• | qcio |
| `qcio_user_inventory` | ç”¨æˆ·ç‰©å“ inventory | qcio |

---

## è¡¨ç»“æ„è¯¦è§£

### 1. users - ç”¨æˆ·åŸºç¡€ä¿¡æ¯è¡¨

**äº‘å‡½æ•°**: `user`

**ç”¨é€”**: å­˜å‚¨ç”¨æˆ·çš„åŸºç¡€ç™»å½•ä¿¡æ¯

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« |
|--------|------|------|------|
| _openid | String | å¾®ä¿¡ç”¨æˆ·å”¯ä¸€æ ‡è¯† | æ˜¯ |
| avatarName | String | ç”¨æˆ·æ˜µç§° | æ˜¯ |
| createTime | Date | åˆ›å»ºæ—¶é—´ | æ˜¯ |
| lastLoginTime | Date | æœ€åç™»å½•æ—¶é—´ | æ˜¯ |
| settings | Object | ç”¨æˆ·è®¾ç½® | å¦ |

**ç´¢å¼•**: `_openid` (ä¸»é”®)

---

### 2. qcio_users - QCIO è´¦å·ä¿¡æ¯è¡¨

**äº‘å‡½æ•°**: `qcio`

**ç”¨é€”**: QCIO ç¤¾äº¤å¹³å°çš„è´¦å·ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¸ªäººèµ„æ–™ã€åœ¨çº¿çŠ¶æ€ã€ç©ºé—´ç»Ÿè®¡ã€AIå¥½å‹åˆ†é…

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« | é»˜è®¤å€¼ |
|--------|------|------|------|--------|
| _openid | String | å¾®ä¿¡ç”¨æˆ·å”¯ä¸€æ ‡è¯† | æ˜¯ | - |
| qcio_id | String | 5 ä½æ•°å­—è´¦å· (10000-99999) | æ˜¯ | è‡ªåŠ¨ç”Ÿæˆ |
| password | String | ç™»å½•å¯†ç  (å›ºå®š 123456) | æ˜¯ | "123456" |
| nickname | String | ç”¨æˆ·æ˜µç§° | æ˜¯ | "åƒç¦§ç½‘å‹" |
| signature | String | ä¸ªæ€§ç­¾å | å¦ | "æ‰¿è«¾ã€çµ ä»€åš’ç”¨ï¼Ÿé‚„bÃ¹sã‚“Ã¬æ´…è¦‹ã€‚" |
| avatar | String | å¤´åƒ emoji | æ˜¯ | "ğŸ‘¤" |
| level | Number | ç”¨æˆ·ç­‰çº§ | æ˜¯ | 1 |
| isOnline | Boolean | åœ¨çº¿çŠ¶æ€ | æ˜¯ | false |
| totalVisits | Number | å†å²æ€»è®¿é—®é‡ | æ˜¯ | 0 |
| todayVisits | Number | ä»Šæ—¥è®¿é—®é‡ | æ˜¯ | 0 |
| recentVisitors | Array | æœ€è¿‘ 10 ä½è®¿å®¢è®°å½• | æ˜¯ | [] |
| myContacts | Array | ç”¨æˆ·åˆ†é…åˆ°çš„20ä¸ªAIå¥½å‹IDåˆ—è¡¨ | å¦ | [] |
| createTime | Date | è´¦å·åˆ›å»ºæ—¶é—´ | æ˜¯ | serverDate |
| lastLoginTime | Date | æœ€åç™»å½•æ—¶é—´ | æ˜¯ | serverDate |

**ç´¢å¼•**: `_openid` (ä¸»é”®), `qcio_id` (å”¯ä¸€)

**recentVisitors æ•°ç»„ç»“æ„**:
```javascript
{
  visitorId: "12345",      // è®¿å®¢çš„ qcio_id
  visitorName: "è®¿å®¢æ˜µç§°",
  avatar: "ğŸ‘¤",
  visitTime: Date,         // è®¿é—®æ—¶é—´
  timeStr: "åˆšåˆš"          // ç›¸å¯¹æ—¶é—´æè¿°
}
```

**myContacts å­—æ®µè¯´æ˜**:
- æ–°ç”¨æˆ·æ³¨å†Œæ—¶ï¼Œä»100ä¸ªAIç½‘å‹ä¸­éšæœºåˆ†é…20ä¸ª
- ä½¿ç”¨ Fisher-Yates æ´—ç‰Œç®—æ³•ç¡®ä¿éšæœºæ€§
- è€ç”¨æˆ·å¦‚æœæ²¡æœ‰è¯¥å­—æ®µï¼Œä¼šè‡ªåŠ¨è¡¥å……åˆ†é…
- èŠå¤©æ—¶åªæ˜¾ç¤ºå·²åˆ†é…çš„20ä¸ªå¥½å‹

---

### 3. qcio_ai_contacts - AI å¥½å‹åˆ—è¡¨è¡¨

**äº‘å‡½æ•°**: `qcio`

**ç”¨é€”**: å­˜å‚¨é¢„è®¾çš„ AI å¥½å‹ä¿¡æ¯ï¼ŒåŒ…æ‹¬èŠå¤©äººè®¾ã€åˆ†ç»„ç­‰ã€‚ç›®å‰å…±100ä¸ªAIç½‘å‹ï¼Œåˆ†ä¸º12ä¸ªåˆ†ç»„ã€‚

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« | é»˜è®¤å€¼ |
|--------|------|------|------|--------|
| _id | String | å¥½å‹å”¯ä¸€æ ‡è¯† | æ˜¯ | è‡ªåŠ¨ç”Ÿæˆ |
| name | String | å¥½å‹æ˜µç§° | æ˜¯ | - |
| avatar | String | å¤´åƒ emoji | æ˜¯ | "ğŸ‘¤" |
| status | String | ä¸ªæ€§ç­¾å | æ˜¯ | - |
| online | Boolean | æ˜¯å¦åœ¨çº¿ | æ˜¯ | true |
| groupName | String | æ‰€å±åˆ†ç»„åç§° | æ˜¯ | "é™Œç”Ÿäºº" |
| groupOrder | Number | åˆ†ç»„æ’åº | æ˜¯ | 0 |
| contactOrder | Number | è”ç³»äººæ’åº | æ˜¯ | 0 |
| chatMode | String | èŠå¤©æ¨¡å¼ (è§ä¸‹æ–¹åˆ—è¡¨) | æ˜¯ | "chat" |
| welcomeMessage | String | æ¬¢è¿æ¶ˆæ¯ | å¦ | - |
| isEnabled | Boolean | æ˜¯å¦å¯ç”¨ | æ˜¯ | true |

**ç´¢å¼•**: `groupName`, `groupOrder`, `contactOrder`

**AI åˆ†ç»„åˆ—è¡¨** (12ä¸ªåˆ†ç»„ï¼Œ100ä¸ªç½‘å‹):
| åˆ†ç»„å | äººæ•° | è¯´æ˜ |
|--------|------|------|
| è‘¬çˆ±å®¶æ— | 22äºº | éä¸»æµç«æ˜Ÿæ–‡é£æ ¼ |
| ç½‘æ¸¸å¼€é»‘ | 6äºº | æ¸¸æˆçˆ±å¥½è€… |
| ç½‘å§å¸¸é©» | 6äºº | æŠ€æœ¯ã€ç½‘å§ç›¸å…³ |
| ç½‘ç»œè¯„è®ºå®¶ | 7äºº | é”®ç›˜ä¾ ã€åæ§½ |
| ç¥ç§˜äººå£« | 9äºº | ç„å­¦ã€ä¸­äºŒã€AI |
| æƒ…æ„Ÿå’¨è¯¢ | 6äºº | æ‹çˆ±ã€å…«å¦ |
| å­¦éœ¸è”ç›Ÿ | 7äºº | å­¦ä¹ ã€æŠ€æœ¯ |
| æ–‡è‰ºé’å¹´ | 8äºº | è¯—æ­Œã€å¤é£ |
| å¨±ä¹è¾¾äºº | 7äºº | ç”µå½±ã€éŸ³ä¹ã€æ®µå­ |
| ä½›ç³»ä¸€æ— | 5äºº | ç¦…æ„ã€æç®€ |
| æ™®é€šäºº | 7äºº | æ—¥å¸¸ç”Ÿæ´» |
| å·¥å…·äºº | 10äºº | è½¬æ¢åŠŸèƒ½ç±» |

**chatMode èŠå¤©æ¨¡å¼åˆ—è¡¨** (36ç§):
| æ¨¡å¼ | åç§° | è¯´æ˜ |
|------|------|------|
| chat | é€šç”¨èŠå¤© | å‹å¥½ã€è‡ªç„¶çš„å¯¹è¯é£æ ¼ |
| qingwu | è½»èˆé£æ‰¬ | 2000å¹´ä»£éä¸»æµç«æ˜Ÿæ–‡é£æ ¼ |
| sadsoul | å¿§éƒç‹å­ | å¿§ä¼¤ã€emoé£æ ¼ |
| nostalgic | å¾€äº‹éšé£ | æ€€æ—§ã€å›å¿†æ€ |
| samat | æ€é©¬ç‰¹ | æç«¯éä¸»æµã€ç«æ˜Ÿæ–‡ |
| longaotian | é¾™å‚²å¤© | ç½‘ç»œå°è¯´ä¸»è§’é£æ ¼ |
| netadmin | ç½‘ç®¡å°å“¥ | æŠ€æœ¯å®…ã€ç½‘å§ç®¡ç†å‘˜ |
| keyboard_warrior | é”®ç›˜ä¾  | ç½‘ç»œè¯„è®ºé£æ ¼ |
| roaster | åæ§½å¤§å¸ˆ | å–·å­ã€åæ§½é£æ ¼ |
| mars | ç«æ˜Ÿæ–‡ | æ–‡æœ¬è½¬ç«æ˜Ÿæ–‡ |
| kaomoji | é¢œæ–‡å­—å› | æ–‡æœ¬è½¬é¢œæ–‡å­— |
| abstract | æŠ½è±¡å¤§å¸ˆ | æ–‡æœ¬è½¬æŠ½è±¡è¯Emoji |
| human | ç¿»è¯‘å®˜ | ç«æ˜Ÿæ–‡/æŠ½è±¡è¯è½¬äººè¯ |
| emo | ä¼¤æ„Ÿè¯­å½• | æ–‡æœ¬è½¬éä¸»æµä¼¤æ„Ÿæ–‡æ¡ˆ |
| mood_log | å¿ƒæƒ…æ—¥èªŒ | ç”ŸæˆQQç©ºé—´å¿ƒæƒ…æ—¥å¿— |
| toxic_soup | æ¯’é¸¡æ±¤ç…² | åŠ±å¿—åå‘æ¯’é¸¡æ±¤ |
| joker | æ®µå­æ‰‹ | æç¬‘ã€æ®µå­ |
| fortune_teller | ç®—å‘½å¤§å¸ˆ | ç„å­¦ã€ç®—å‘½ |
| chunibyo | ä¸­äºŒå°‘å¹´ | ä¸­äºŒç—…ã€è¶…èƒ½åŠ› |
| love_expert | æƒ…æ„Ÿä¸“å®¶ | æ‹çˆ±å’¨è¯¢ |
| gossip_girl | å…«å¦å°å¦¹ | å…«å¦ã€å¨±ä¹ |
| programmer | ç¨‹åºå‘˜ | ä»£ç ã€æŠ€æœ¯ |
| sports_fan | è¿åŠ¨è¾¾äºº | ä½“è‚²ã€ç”µç« |
| math_geek | æ•°å­¦æ€ªäºº | æ•°å­¦ã€ç†ç§‘ |
| nerd | å­¦éœ¸å› | å­¦ä¹ çŸ¥è¯† |
| chinglish |ä¸­å¼è‹±è¯­ | Chinglishé£æ ¼ |
| ancient | å¤é£å±…å£« | å¤æ–‡ã€è¯—è¯ |
| poet | è¯—äººæ–‡é’ | è¯—æ­Œã€æ–‡è‰º |
| down_to_earth | æ¥åœ°æ°” | æ™®é€šäººè§†è§’ |
| movie_fan | å½±è¿· | ç”µå½±ã€è¿½å‰§ |
| music_lover | éŸ³ä¹è¾¾äºº | éŸ³ä¹ã€æ­Œæ›² |
| artist | è‰ºæœ¯å®¶ | è‰ºæœ¯ã€åˆ›ä½œ |
| buddhist | ä½›ç³»é’å¹´ | ä½›ç³»ã€éšç¼˜ |
| minimalist | æç®€å¤§å¸ˆ | æç®€ä¸»ä¹‰ |
| ai_self | AIåŠ©æ‰‹ | AIè‡ªæˆ‘è®¤çŸ¥ |
| flirt_master | æ’©å¦¹é«˜æ‰‹ | åœŸå‘³æƒ…è¯ |

**ç¤ºä¾‹æ•°æ®**:
```javascript
{
  _id: "contact_001",
  name: "è½»èˆé£æ‰¬",
  avatar: "ğŸ’ƒ",
  status: "æ»´~ èªæ¹œè¼•èˆé£›é¢ºã€‚èªå–œæ­¡çœ‹å—¼ç­±èªªï¼Œæ²µè¦½æ‚³é˜£ã„‹å—ï¼Ÿ~",
  online: true,
  groupName: "è‘¬çˆ±å®¶æ—",
  groupOrder: 1,
  contactOrder: 1,
  chatMode: "qingwu",
  welcomeMessage: "æ»´~ èªæ¹œè¼•èˆé£›é¢ºã€‚èªå–œæ­¡çœ‹å—¼ç­±èªªï¼Œæ²µè¦½æ‚³é˜£ã„‹å—ï¼Ÿ~",
  isEnabled: true
}
```

---

### 4. qcio_groups - ç¾¤èŠåˆ—è¡¨è¡¨

**äº‘å‡½æ•°**: `qcio`

**ç”¨é€”**: å­˜å‚¨ç¾¤èŠä¿¡æ¯ï¼ŒåŒ…æ‹¬ç¾¤æˆå‘˜åˆ—è¡¨ã€‚ç›®å‰å…±6ä¸ªç¾¤èŠï¼Œæ¯ä¸ªç¾¤18-24äººã€‚

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« | é»˜è®¤å€¼ |
|--------|------|------|------|--------|
| _id | String | ç¾¤å”¯ä¸€æ ‡è¯† | æ˜¯ | è‡ªåŠ¨ç”Ÿæˆ |
| name | String | ç¾¤åç§° | æ˜¯ | - |
| avatar | String | ç¾¤å¤´åƒ emoji | æ˜¯ | "ğŸ‘¥" |
| memberCount | Number | ç¾¤æˆå‘˜æ€»æ•° | æ˜¯ | 0 |
| mode | String | é»˜è®¤èŠå¤©æ¨¡å¼ | æ˜¯ | "chat" |
| members | Array | ç¾¤æˆå‘˜åˆ—è¡¨ | æ˜¯ | [] |
| groupOrder | Number | æ’åº | æ˜¯ | 0 |
| isEnabled | Boolean | æ˜¯å¦å¯ç”¨ | æ˜¯ | true |

**members æ•°ç»„æ ¼å¼**:
```javascript
[
  { name: "è½»èˆé£æ‰¬", avatar: "ğŸ’ƒ", mode: "qingwu" },
  { name: "å¿§éƒç‹å­", avatar: "ğŸš¬", mode: "sadsoul" }
]
```

**ç¾¤èŠåˆ—è¡¨** (6ä¸ªç¾¤):
| ç¾¤å | äººæ•° | é£æ ¼ | è¯´æ˜ |
|------|------|------|------|
| è‘¬çˆ±ç½‘æ¸¸å®¶æ— | 24äºº | qingwu | è‘¬çˆ±å®¶æ—+æ¸¸æˆçˆ±å¥½è€…æ··åˆ |
| ç½‘å§æŠ€æœ¯è”ç›Ÿ | 20äºº | netadmin | æŠ€æœ¯+ç½‘ç»œè¯„è®ºæ··åˆ |
| ç¥ç§˜å­¦å›­ | 20äºº | fortune_teller | ç„å­¦+å¤é£+ä½›ç³»æ··åˆ |
| æƒ…æ„Ÿå…«å¦åœˆ | 21äºº | love_expert | æƒ…æ„Ÿ+å¨±ä¹å…«å¦æ··åˆ |
| å­¦éœ¸æ–‡è‰ºç¤¾ | 19äºº | nerd | å­¦ä¹ +æ–‡è‰ºæ··åˆ |
| æ™®é€šç”Ÿæ´»é¦† | 18äºº | down_to_earth | æ™®é€šç”Ÿæ´»+å·¥å…·äººæ··åˆ |

**ç¾¤èŠå‘è¨€æœºåˆ¶**:
- æ¯æ¬¡å‘æ¶ˆæ¯éšæœºé€‰æ‹©1-6ä¸ªç¾¤æˆå‘˜å›å¤
- æ¦‚ç‡åˆ†å¸ƒï¼š1äºº40%ã€2äºº30%ã€3äºº15%ã€4äºº8%ã€5äºº5%ã€6äºº2%
- ç¾¤æˆå‘˜åˆ—è¡¨å¯åœ¨ç¾¤èŠé¡µé¢å±•å¼€/æ”¶èµ·æŸ¥çœ‹
- AIå›å¤ä¹‹é—´æœ‰0.8-1.8ç§’çš„éšæœºå»¶è¿Ÿï¼Œæ¨¡æ‹ŸçœŸå®ç¾¤èŠä½“éªŒ

**ç¾¤æˆå‘˜é€‰æ‹©ç®—æ³•** (Fisher-Yates æ´—ç‰Œ):
```javascript
// éšæœºæŠ½å–æˆå‘˜ï¼ˆä¸é‡å¤ï¼‰
const selected = [];
const available = [...members];

for (let i = 0; i < speakerCount; i++) {
  const randomIndex = Math.floor(Math.random() * available.length);
  selected.push(available[randomIndex]);
  available.splice(randomIndex, 1); // ç§»é™¤å·²é€‰çš„ï¼Œé¿å…é‡å¤
}
```

---

### 5. qcio_mood_logs - å¿ƒæƒ…æ—¥å¿—è¡¨

**äº‘å‡½æ•°**: `qcio`

**ç”¨é€”**: ç”¨æˆ·åœ¨ QQ ç©ºé—´å‘å¸ƒçš„å¿ƒæƒ…æ—¥å¿—

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« |
|--------|------|------|------|
| _openid | String | å‘å¸ƒè€… openid | æ˜¯ |
| mood_type | String | æƒ…ç»ªç±»å‹ (sad/passionate/sweet/confused) | æ˜¯ |
| mood_name | String | æƒ…ç»ªåç§° | æ˜¯ |
| mood_icon | String | æƒ…ç»ªå›¾æ ‡ emoji | æ˜¯ |
| keywords | String | å…³é”®è¯ | å¦ |
| content | String | æ—¥å¿—å†…å®¹ | æ˜¯ |
| createTime | Date | å‘å¸ƒæ—¶é—´ | æ˜¯ |
| visits | Number | è®¿é—®é‡ | æ˜¯ | 0 |
| likes | Number | ç‚¹èµæ•° | æ˜¯ | 0 |

**ç´¢å¼•**: `_openid`, `createTime` (é™åº)

**mood_type å¯¹åº”å…³ç³»**:
| mood_type | mood_icon | è¯´æ˜ |
|-----------|-----------|------|
| sad | ğŸ’” | ä¼¤æ„Ÿ |
| passionate | ğŸ”¥ | çƒ­æƒ… |
| sweet | ğŸ’• | ç”œèœœ |
| confused | ğŸŒ«ï¸ | è¿·èŒ« |

---

### 5. qcio_chat_history - å•äººèŠå¤©å†å²è¡¨

**äº‘å‡½æ•°**: `qcio`

**ç”¨é€”**: å­˜å‚¨ç”¨æˆ·ä¸å•ä¸ªè”ç³»äººçš„èŠå¤©è®°å½•

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« |
|--------|------|------|------|
| _openid | String | ç”¨æˆ· openid | æ˜¯ |
| contact_name | String | è”ç³»äººåç§° | æ˜¯ |
| messages | Array | æ¶ˆæ¯åˆ—è¡¨ | æ˜¯ |
| updateTime | Date | æœ€åæ›´æ–°æ—¶é—´ | æ˜¯ |

**ç´¢å¼•**: `_openid` + `contact_name` (å¤åˆå”¯ä¸€ç´¢å¼•)

**messages æ•°ç»„ç»“æ„**:
```javascript
{
  type: "me" | "ai",      // æ¶ˆæ¯ç±»å‹
  content: "æ¶ˆæ¯å†…å®¹",
  timestamp: 1234567890   // æ—¶é—´æˆ³
}
```

---

### 6. qcio_guestbook - ç©ºé—´ç•™è¨€æ¿è¡¨

**äº‘å‡½æ•°**: `qcio`

**ç”¨é€”**: ç”¨æˆ·ç©ºé—´çš„ç•™è¨€è®°å½•ï¼ŒåŒ…æ‹¬"è¸©ä¸€è¸©"è‡ªåŠ¨ç”Ÿæˆçš„ç•™è¨€

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« |
|--------|------|------|------|
| _openid | String | ç©ºé—´ä¸»äºº openid | æ˜¯ |
| visitorId | String | è®¿å®¢ qcio_id | æ˜¯ |
| visitorName | String | è®¿å®¢æ˜µç§° | æ˜¯ |
| avatar | String | è®¿å®¢å¤´åƒ emoji | æ˜¯ |
| content | String | ç•™è¨€å†…å®¹ | æ˜¯ |
| createTime | Date | ç•™è¨€æ—¶é—´ | æ˜¯ |

**ç´¢å¼•**: `_openid`, `createTime` (é™åº)

**è‡ªåŠ¨ç•™è¨€å†…å®¹ç¤ºä¾‹**:
- "è·¯è¿‡ï¼Œè¸©è¸©~"
- "æ¥ä¸²ä¸ªé—¨ï¼Œæ”¯æŒä¸‹ï¼"
- "æ‚„æ‚„è·¯è¿‡ï¼Œç•™ä¸ªè„šå°~"
- "è·¯è¿‡æ¥çœ‹çœ‹ï¼Œä¸é”™å“¦~"

---

### 7. mood_garden - å¿ƒæƒ…å†œåœºæ¸¸æˆè¡¨

**äº‘å‡½æ•°**: `mood_logic`

**ç”¨é€”**: å¿ƒæƒ…å†œåœºå°æ¸¸æˆçš„çŠ¶æ€æ•°æ®

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« |
|--------|------|------|------|
| _openid | String | ç”¨æˆ· openid | æ˜¯ |
| currentMood | String | å½“å‰ç§æ¤çš„æƒ…ç»ªç±»å‹ | æ˜¯ |
| moodName | String | æƒ…ç»ªåç§° | æ˜¯ |
| startTime | Date | å¼€å§‹ç§æ¤æ—¶é—´ | æ˜¯ |
| endTime | Date | é¢„è®¡æˆç†Ÿæ—¶é—´ | æ˜¯ |
| status | String | çŠ¶æ€ (idle/compiling) | æ˜¯ |
| totalOutput | Number | æ€»äº§é‡ | æ˜¯ | 0 |
| remainingOutput | Number | å‰©ä½™äº§é‡ | æ˜¯ | 0 |
| stealedBy | Array | è¢«å·è®°å½• | æ˜¯ | [] |
| lastModified | Date | æœ€åä¿®æ”¹æ—¶é—´ | æ˜¯ |

**ç´¢å¼•**: `_openid`

**stealedBy æ•°ç»„ç»“æ„**:
```javascript
{
  visitorId: "12345",
  amount: 10,
  time: Date
}
```

---

### 8. qcio_wallet - ç”¨æˆ·é’±åŒ…è¡¨

**äº‘å‡½æ•°**: `qcio`

**ç”¨é€”**: å­˜å‚¨ç”¨æˆ·çš„é‡‘å¸å’ŒQç‚¹ä½™é¢ï¼Œä»¥åŠVIPçŠ¶æ€

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« | é»˜è®¤å€¼ |
|--------|------|------|------|--------|
| _openid | String | å¾®ä¿¡ç”¨æˆ·å”¯ä¸€æ ‡è¯† | æ˜¯ | - |
| coins | Number | é‡‘å¸ä½™é¢ | æ˜¯ | 0 |
| qpoints | Number | Qç‚¹ä½™é¢ | æ˜¯ | 0 |
| totalCoinsEarned | Number | å†å²ç´¯è®¡è·å¾—é‡‘å¸ | æ˜¯ | 0 |
| totalQpointsEarned | Number | å†å²ç´¯è®¡è·å¾—Qç‚¹ | æ˜¯ | 0 |
| isVip | Boolean | æ˜¯å¦VIP | æ˜¯ | false |
| vipExpireTime | Date | VIPè¿‡æœŸæ—¶é—´ | å¦ | null |
| createTime | Date | åˆ›å»ºæ—¶é—´ | æ˜¯ | serverDate |
| updateTime | Date | æ›´æ–°æ—¶é—´ | æ˜¯ | serverDate |

**ç´¢å¼•**: `_openid` (ä¸»é”®)

---

### 9. qcio_transactions - äº¤æ˜“è®°å½•è¡¨

**äº‘å‡½æ•°**: `qcio`

**ç”¨é€”**: è®°å½•æ‰€æœ‰è´§å¸å˜åŠ¨æµæ°´

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« |
|--------|------|------|------|
| _id | String | äº¤æ˜“å”¯ä¸€ID | æ˜¯ |
| _openid | String | ç”¨æˆ· openid | æ˜¯ |
| type | String | äº¤æ˜“ç±»å‹ (earn/spend) | æ˜¯ |
| currency | String | è´§å¸ç±»å‹ (coins/qpoints) | æ˜¯ |
| amount | Number | é‡‘é¢ï¼ˆæ­£æ•°ï¼‰ | æ˜¯ |
| source | String | æ¥æº/ç”¨é€” (è§ä¸‹æ–¹åˆ—è¡¨) | æ˜¯ |
| description | String | æè¿° | æ˜¯ |
| balanceAfter | Number | äº¤æ˜“åä½™é¢ | æ˜¯ |
| createTime | Date | äº¤æ˜“æ—¶é—´ | æ˜¯ |

**ç´¢å¼•**: `_openid`, `createTime` (é™åº)

**source æ¥æºåˆ—è¡¨**:
| source | è¯´æ˜ | type |
|--------|------|------|
| daily_checkin | æ¯æ—¥ç­¾åˆ° | earn |
| daily_checkin_bonus | è¿ç»­ç­¾åˆ°å¥–åŠ± | earn |
| publish_mood_log | å‘å¸ƒå¿ƒæƒ…æ—¥å¿— | earn |
| chat_interaction | èŠå¤©äº’åŠ¨ | earn |
| farm_harvest | å†œåœºæ”¶è· | earn |
| space_visited | è¢«è¸©ç©ºé—´ | earn |
| log_liked | æ—¥å¿—è¢«ç‚¹èµ | earn |
| level_up | ç­‰çº§å¥–åŠ± | earn |
| vip_code | VIPå…‘æ¢ç  | earn |
| achievement | æˆå°±è§£é” | earn |
| event_reward | æ´»åŠ¨å¥–åŠ± | earn |
| buy_seed | è´­ä¹°ç§å­ | spend |
| speedup_farm | åŠ é€Ÿå†œåœº | spend |
| buy_avatar | è´­ä¹°å¤´åƒ | spend |
| buy_background | è´­ä¹°èƒŒæ™¯ | spend |
| buy_vip_month | è´­ä¹°VIPæœˆå¡ | spend |
| buy_vip_year | è´­ä¹°VIPå¹´å¡ | spend |
| unlock_all_ai | è§£é”å…¨éƒ¨AI | spend |

---

### 10. qcio_daily_tasks - æ¯æ—¥ä»»åŠ¡è®°å½•è¡¨

**äº‘å‡½æ•°**: `qcio`

**ç”¨é€”**: è®°å½•ç”¨æˆ·æ¯æ—¥ä»»åŠ¡å®Œæˆæƒ…å†µ

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« | é»˜è®¤å€¼ |
|--------|------|------|------|--------|
| _openid | String | ç”¨æˆ· openid | æ˜¯ | - |
| date | String | æ—¥æœŸ (YYYY-MM-DD) | æ˜¯ | - |
| checkinDone | Boolean | æ˜¯å¦ç­¾åˆ° | æ˜¯ | false |
| checkinStreak | Number | è¿ç»­ç­¾åˆ°å¤©æ•° | æ˜¯ | 0 |
| moodLogCount | Number | å‘å¸ƒæ—¥å¿—æ¬¡æ•° | æ˜¯ | 0 |
| chatCount | Number | èŠå¤©æ¬¡æ•° | æ˜¯ | 0 |
| lastChatTime | Date | æœ€åèŠå¤©æ—¶é—´ | æ˜¯ | null |
| farmHarvestCount | Number | å†œåœºæ”¶è·æ¬¡æ•° | æ˜¯ | 0 |
| createTime | Date | åˆ›å»ºæ—¶é—´ | æ˜¯ | serverDate |
| updateTime | Date | æ›´æ–°æ—¶é—´ | æ˜¯ | serverDate |

**ç´¢å¼•**: `_openid` + `date` (å¤åˆå”¯ä¸€ç´¢å¼•)

---

### 11. qcio_vip_codes - VIPå…‘æ¢ç è¡¨

**äº‘å‡½æ•°**: `qcio`

**ç”¨é€”**: ç®¡ç†VIPå…‘æ¢ç çš„ç”Ÿæˆå’Œä½¿ç”¨

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« | é»˜è®¤å€¼ |
|--------|------|------|------|--------|
| code | String | å…‘æ¢ç ï¼ˆå”¯ä¸€ï¼‰ | æ˜¯ | - |
| type | String | ç±»å‹ (qpoints/month_vip/year_vip) | æ˜¯ | - |
| value | Number | é¢å€¼ï¼ˆQç‚¹æ•°é‡æˆ–æœˆæ•°ï¼‰ | æ˜¯ | - |
| maxUses | Number | æœ€å¤§ä½¿ç”¨æ¬¡æ•° | æ˜¯ | 1 |
| usedCount | Number | å·²ä½¿ç”¨æ¬¡æ•° | æ˜¯ | 0 |
| isActive | Boolean | æ˜¯å¦æ¿€æ´» | æ˜¯ | true |
| expireTime | Date | å…‘æ¢ç è¿‡æœŸæ—¶é—´ | å¦ | null |
| createTime | Date | åˆ›å»ºæ—¶é—´ | æ˜¯ | serverDate |

**ç´¢å¼•**: `code` (å”¯ä¸€)

**type ç±»å‹åˆ—è¡¨**:
| type | value ç¤ºä¾‹ | è¯´æ˜ |
|------|-----------|------|
| qpoints | 10/50/100 | Qç‚¹å…‘æ¢ç  |
| month_vip | 1 | VIPæœˆå¡ |
| year_vip | 12 | VIPå¹´å¡ |

---

### 12. qcio_vip_records - VIPå¼€é€šè®°å½•è¡¨

**äº‘å‡½æ•°**: `qcio`

**ç”¨é€”**: è®°å½•ç”¨æˆ·VIPå¼€é€šå†å²

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« |
|--------|------|------|------|
| _id | String | è®°å½•å”¯ä¸€ID | æ˜¯ |
| _openid | String | ç”¨æˆ· openid | æ˜¯ |
| type | String | ç±»å‹ (month/year) | æ˜¯ |
| duration | Number | æ—¶é•¿ï¼ˆæœˆï¼‰ | æ˜¯ |
| source | String | æ¥æº (code/manual) | æ˜¯ |
| startTime | Date | å¼€å§‹æ—¶é—´ | æ˜¯ |
| endTime | Date | ç»“æŸæ—¶é—´ | æ˜¯ |
| createTime | Date | åˆ›å»ºæ—¶é—´ | æ˜¯ |

**ç´¢å¼•**: `_openid`, `createTime` (é™åº)

---

### 13. qcio_achievements - æˆå°±å®šä¹‰è¡¨

**äº‘å‡½æ•°**: `qcio`

**ç”¨é€”**: å®šä¹‰æ‰€æœ‰æˆå°±åŠå…¶å¥–åŠ±

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« | é»˜è®¤å€¼ |
|--------|------|------|------|--------|
| _id | String | æˆå°±å”¯ä¸€æ ‡è¯† | æ˜¯ | - |
| name | String | æˆå°±åç§° | æ˜¯ | - |
| description | String | æˆå°±æè¿° | æ˜¯ | - |
| icon | String | æˆå°±å›¾æ ‡ emoji | æ˜¯ | - |
| type | String | ç±»å‹ (count/login/social/collect) | æ˜¯ | - |
| condition | Object | è¾¾æˆæ¡ä»¶ | æ˜¯ | {} |
| reward | Object | å¥–åŠ± (coins/qpoints) | æ˜¯ | {} |
| order | Number | æ’åº | æ˜¯ | 0 |
| isEnabled | Boolean | æ˜¯å¦å¯ç”¨ | æ˜¯ | true |

**type ç±»å‹åˆ—è¡¨**:
| type | ç¤ºä¾‹ | condition ç»“æ„ |
|------|------|---------------|
| count | èŠå¤©1000æ¡ | `{ count: 1000 }` |
| login | è¿ç»­ç™»å½•7å¤© | `{ days: 7 }` |
| social | ç©ºé—´è¢«è®¿é—®100æ¬¡ | `{ visits: 100 }` |
| collect | æ”¶é›†10ä¸ªå¤´åƒ | `{ avatars: 10 }` |

**ç¤ºä¾‹æ•°æ®**:
```javascript
{
  _id: "ach_chat_100",
  name: "è¯ç—¨",
  description: "ç´¯è®¡èŠå¤©100æ¡",
  icon: "ğŸ’¬",
  type: "count",
  condition: { count: 100 },
  reward: { coins: 50, qpoints: 5 },
  order: 1
}
```

---

### 14. qcio_user_achievements - ç”¨æˆ·æˆå°±è®°å½•è¡¨

**äº‘å‡½æ•°**: `qcio`

**ç”¨é€”**: è®°å½•ç”¨æˆ·å·²è§£é”çš„æˆå°±

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« | é»˜è®¤å€¼ |
|--------|------|------|------|--------|
| _openid | String | ç”¨æˆ· openid | æ˜¯ | - |
| achievementId | String | æˆå°±ID | æ˜¯ | - |
| progress | Number | å½“å‰è¿›åº¦ | æ˜¯ | 0 |
| isCompleted | Boolean | æ˜¯å¦å®Œæˆ | æ˜¯ | false |
| unlockTime | Date | è§£é”æ—¶é—´ | å¦ | null |

**ç´¢å¼•**: `_openid` + `achievementId` (å¤åˆå”¯ä¸€ç´¢å¼•)

---

### 15. qcio_user_inventory - ç”¨æˆ·ç‰©å“èƒŒåŒ…è¡¨

**äº‘å‡½æ•°**: `qcio`

**ç”¨é€”**: å­˜å‚¨ç”¨æˆ·æ‹¥æœ‰çš„è£…é¥°ç‰©å“

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« | é»˜è®¤å€¼ |
|--------|------|------|------|--------|
| _openid | String | ç”¨æˆ· openid | æ˜¯ | - |
| itemType | String | ç‰©å“ç±»å‹ (avatar/frame/background) | æ˜¯ | - |
| itemId | String | ç‰©å“ID | æ˜¯ | - |
| isEquipped | Boolean | æ˜¯å¦è£…å¤‡ä¸­ | æ˜¯ | false |
| obtainTime | Date | è·å–æ—¶é—´ | æ˜¯ | serverDate |
| source | String | è·å–æ¥æº | æ˜¯ | - |

**ç´¢å¼•**: `_openid` + `itemType` + `itemId` (å¤åˆå”¯ä¸€ç´¢å¼•)

**itemType ç±»å‹åˆ—è¡¨**:
| ç±»å‹ | è¯´æ˜ |
|------|------|
| avatar | å¤´åƒ emoji |
| frame | å¤´åƒæ¡† |
| background | èŠå¤©èƒŒæ™¯ |
| title | ç§°å· |

---

## æ•°æ®å…³è”å…³ç³»

```mermaid
graph TD
    A[users] --> B[qcio_users]
    B --> W[qcio_wallet]
    B --> C[qcio_mood_logs]
    B --> D[qcio_chat_history]
    B --> E[qcio_guestbook]
    A --> F[mood_garden]
    W --> T[qcio_transactions]
    W --> DT[qcio_daily_tasks]
    W --> VR[qcio_vip_records]
    VC[qcio_vip_codes] --> VR
    B --> AC[qcio_user_achievements]
    AC[qcio_user_achievements] --> ACH[qcio_achievements]
    B --> INV[qcio_user_inventory]
```

**è¯´æ˜**:
- `users` å’Œ `qcio_users` é€šè¿‡ `_openid` å…³è”åŒä¸€ç”¨æˆ·
- `qcio_users` æ˜¯ QCIO åŠŸèƒ½çš„æ ¸å¿ƒè¡¨
- `qcio_wallet` æ˜¯ç»æµç³»ç»Ÿæ ¸å¿ƒï¼Œå…³è”æ‰€æœ‰äº¤æ˜“å’Œä»»åŠ¡
- `qcio_mood_logs`ã€`qcio_chat_history`ã€`qcio_guestbook` éƒ½é€šè¿‡ `_openid` å…³è”åˆ°ç”¨æˆ·
- `mood_garden` ç‹¬ç«‹è¿ä½œï¼Œé€šè¿‡ `_openid` å…³è”ç”¨æˆ·
- `qcio_vip_codes` å¯ç”Ÿæˆ `qcio_transactions` å’Œ `qcio_vip_records`
- `qcio_user_achievements` å…³è”ç”¨æˆ·å’Œæˆå°±å®šä¹‰

---

## è®¾è®¡è§„èŒƒ

### å‘½åè§„èŒƒ
- è¡¨å: `åŠŸèƒ½æ¨¡å—_å­åŠŸèƒ½` (å¦‚ `qcio_users`)
- å­—æ®µå: é©¼å³°å‘½åæ³• (å¦‚ `lastLoginTime`)
- ç´¢å¼•: ä¸»é”®ä½¿ç”¨ `_openid`

### é€šç”¨å­—æ®µ
- `_openid`: æ‰€æœ‰è¡¨çš„å…³è”å­—æ®µ
- `createTime`: åˆ›å»ºæ—¶é—´ï¼Œç»Ÿä¸€ä½¿ç”¨ `db.serverDate()`
- æ—¶é—´å­—æ®µ: ç»Ÿä¸€ä½¿ç”¨ Date ç±»å‹

### æ•°æ®å®‰å…¨
- æ‰€æœ‰äº‘å‡½æ•°éƒ½é€šè¿‡ `cloud.getWXContext()` è·å–ç”¨æˆ· openid
- æ•°æ®æŸ¥è¯¢å‡ä½¿ç”¨ `.where({ _openid: OPENID })` ç¡®ä¿æ•°æ®éš”ç¦»
- å†…å®¹å®‰å…¨æ£€æµ‹ä½¿ç”¨å¾®ä¿¡ `msgSecCheck` API

---

## åŠŸèƒ½ç‰¹æ€§

### èŠå¤©åŠŸèƒ½å®‰å…¨æœºåˆ¶

#### 1. å†…å®¹å®‰å…¨æ£€æµ‹
ä½¿ç”¨å¾®ä¿¡äº‘å¼€å‘æä¾›çš„ `msgSecCheck` API è¿›è¡Œå†…å®¹å®‰å…¨æ ¡éªŒï¼š

**æ£€æµ‹æ—¶æœº**:
- ç”¨æˆ·å‘é€æ¶ˆæ¯æ—¶ï¼ˆè¾“å…¥æ£€æµ‹ï¼‰
- AI ç”Ÿæˆå›å¤æ—¶ï¼ˆè¾“å‡ºæ£€æµ‹ï¼‰

**å®ç°ä»£ç ** (`cloudfunctions/chat/safety.js`):
```javascript
const checkContentSafety = async (cloud, content) => {
  const result = await cloud.openapi.security.msgSecCheck({ content });
  return { safe: result.errCode === 0 };
};
```

**è¿è§„å¤„ç†**:
- è¾“å…¥è¿è§„ï¼šè¿”å›æç¤º"ï¼ˆç³»ç»Ÿæç¤ºï¼šå†…å®¹åŒ…å«æ•æ„Ÿè¯ï¼Œå·²è¢«ç½‘ç®¡å±è”½ v_vï¼‰"
- è¾“å‡ºè¿è§„ï¼šæ›¿æ¢ä¸º"ï¼ˆå†…å®¹æ­£åœ¨å®¡æ ¸ä¸­ï¼Œæš‚æ—¶æ— æ³•æ˜¾ç¤º...ï¼‰"

#### 2. å‘é€é¢‘ç‡é™åˆ¶
é˜²æ­¢ç”¨æˆ·è¿‡å¿«å‘é€æ¶ˆæ¯ï¼š

| é™åˆ¶é¡¹ | æ•°å€¼ |
|--------|------|
| å†·å´æ—¶é—´ | 2000æ¯«ç§’ (2ç§’) |
| è¶…é™æç¤º | "è¯·ç¨ç­‰Xç§’åå†å‘é€" |

**å®ç°ä»£ç ** (`miniprogram/pages/chat/index.js`):
```javascript
MESSAGE_COOLDOWN: 2000, // å‘é€å†·å´æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
lastSendTime: 0,

async sendMessage() {
  const now = Date.now();
  const timeSinceLastSend = now - this.lastSendTime;
  if (timeSinceLastSend < this.MESSAGE_COOLDOWN) {
    const remainingTime = Math.ceil((this.MESSAGE_COOLDOWN - timeSinceLastSend) / 1000);
    wx.showToast({
      title: `è¯·ç¨ç­‰${remainingTime}ç§’åå†å‘é€`,
      icon: 'none'
    });
    return;
  }
  this.lastSendTime = Date.now();
  // ... ç»§ç»­å‘é€é€»è¾‘
}
```

#### 3. è¾“å…¥é•¿åº¦é™åˆ¶
é˜²æ­¢ç”¨æˆ·è¾“å…¥è¿‡é•¿å†…å®¹ï¼š

| é¡µé¢ | æœ€å¤§é•¿åº¦ | è¶…é™æç¤º |
|------|----------|----------|
| å•äººèŠå¤© | 50å­— | "æœ€å¤š50å­—" |
| ç¾¤èŠ | 50å­— | "æœ€å¤š50å­—" |

**å®ç°ä»£ç **:
```javascript
data: {
  maxLength: 50,
  inputLength: 0
},

onChatInput(e) {
  const value = e.detail.value;
  if (value.length > this.data.maxLength) {
    wx.showToast({
      title: `æœ€å¤š${this.data.maxLength}å­—`,
      icon: 'none'
    });
    return;
  }
  this.setData({
    chatInput: value,
    inputLength: value.length
  });
}
```

### èŠå¤©ä½“éªŒä¼˜åŒ–

#### 1. è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
æ–°æ¶ˆæ¯åˆ°è¾¾æ—¶è‡ªåŠ¨æ»šåŠ¨åˆ°èŠå¤©åº•éƒ¨ï¼š

```javascript
this.setData({
  chatList: newList,
  scrollToView: 'msg-bottom'  // æ»šåŠ¨åˆ°æœ€åä¸€æ¡æ¶ˆæ¯
});
```

#### 2. å‘é€çŠ¶æ€æç¤º
| çŠ¶æ€ | æ˜¾ç¤º |
|------|------|
| å‘é€ä¸­ | "è¾“å…¥ä¸­..." + åŠ è½½åŠ¨ç”» |
| å‘é€æˆåŠŸ | æ¢å¤ç¾¤åæ˜¾ç¤º |
| å‘é€å¤±è´¥ | "ç¦»çº¿" çŠ¶æ€ |

#### 3. æ¶ˆæ¯å†å²ç®¡ç†
- å•äººèŠå¤©ï¼šå–æœ€è¿‘ 20 æ¡ä½œä¸ºä¸Šä¸‹æ–‡
- ç¾¤èŠï¼šå–æœ€è¿‘ 20 æ¡ä½œä¸ºä¸Šä¸‹æ–‡
- èŠå¤©è®°å½•è‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“

---

## ç»´æŠ¤æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| 2024-12 | v1.0 | åˆå§‹ç‰ˆæœ¬ï¼Œæ•´ç†æ‰€æœ‰æ•°æ®åº“è¡¨ |
| 2025-01 | v1.1 | æ–°å¢ 36 ç§èŠå¤©æ¨¡å¼ï¼Œ100 ä¸ª AI å¥½å‹ï¼Œ6 ä¸ªç¾¤èŠ |
| 2025-01 | v1.2 | æ–°å¢å†…å®¹å®‰å…¨æ£€æµ‹ã€å‘é€é¢‘ç‡é™åˆ¶ã€è¾“å…¥é•¿åº¦é™åˆ¶ |
| 2025-01 | v1.3 | æ–°å¢è‡ªåŠ¨æ»šåŠ¨ã€ç¾¤æˆå‘˜å±•å¼€/æ”¶èµ·ã€éšæœºå‘è¨€æœºåˆ¶ |
| 2025-01 | v2.0 | æ–°å¢ç»æµç³»ç»Ÿï¼šåŒè´§å¸ï¼ˆé‡‘å¸/Qç‚¹ï¼‰ã€VIPå…‘æ¢ç ã€æ¯æ—¥ä»»åŠ¡ã€æˆå°±ç³»ç»Ÿ |
| 2025-01 | v2.1 | æ–°å¢ qcio_mood_logs è¡¨ï¼Œå®Œå–„å¿ƒæƒ…æ—¥å¿—å¥–åŠ±æœºåˆ¶ |

---

## ç»æµç³»ç»Ÿè®¾è®¡æ–‡æ¡£

### ç³»ç»Ÿæ¦‚è¿°

QCIO ç»æµç³»ç»Ÿé‡‡ç”¨åŒè´§å¸ä½“ç³»ï¼Œæ”¯æŒ VIP å…‘æ¢ç åŠŸèƒ½ï¼Œä¸ºç”¨æˆ·æä¾›å®Œæ•´çš„æ¸¸æˆåŒ–ä½“éªŒã€‚

### åŒè´§å¸ä½“ç³»

| è´§å¸ | åç§° | è·å–æ–¹å¼ | ä¸»è¦ç”¨é€” |
|------|------|----------|----------|
| ğŸ’° é‡‘å¸ | ç­¾åˆ°ã€äº’åŠ¨ã€æ¸¸æˆ | ç§å­ã€åŠ é€Ÿã€åŸºç¡€è£…é¥° |
| ğŸ’ Qç‚¹ | VIPå…‘æ¢ç ã€æ´»åŠ¨ | VIPä¼šå‘˜ã€é«˜çº§è£…é¥° |

### é‡‘å¸è·å–è§„åˆ™

| æ–¹å¼ | æ•°é‡ | é™åˆ¶ |
|------|------|------|
| æ¯æ—¥ç­¾åˆ° | 10é‡‘å¸ | æ¯å¤©1æ¬¡ |
| è¿ç»­ç­¾åˆ°3å¤© | +5é‡‘å¸ | é¢å¤–å¥–åŠ± |
| è¿ç»­ç­¾åˆ°7å¤© | +20é‡‘å¸ | é¢å¤–å¥–åŠ± |
| å‘å¸ƒå¿ƒæƒ…æ—¥å¿— | 5é‡‘å¸ | æ¯å¤©3æ¬¡ |
| èŠå¤©äº’åŠ¨ | 1é‡‘å¸ | æ¯å¤©20æ¡ |
| å†œåœºæ”¶è· | 10~50é‡‘å¸ | æ ¹æ®äº§é‡ |
| è¢«è¸©ç©ºé—´ | 2é‡‘å¸ | è¢«åŠ¨è·å¾— |
| æ—¥å¿—è¢«ç‚¹èµ | 1é‡‘å¸ | æ¯ä¸ª |

### Qç‚¹è·å–æ–¹å¼

| æ–¹å¼ | æ•°é‡ | è¯´æ˜ |
|------|------|------|
| VIPå…‘æ¢ç  | 10-100Qç‚¹ | åå°ç”Ÿæˆ |
| ç­‰çº§å¥–åŠ± | 5Qç‚¹ | æ¯å‡1çº§ |
| æˆå°±è§£é” | 3-10Qç‚¹ | ç‰¹æ®Šæˆå°± |

### VIPä¼šå‘˜ç‰¹æƒ

| ç­‰çº§ | ä»·æ ¼ | ç‰¹æƒ |
|------|------|------|
| æ™®é€šç”¨æˆ· | å…è´¹ | åŸºç¡€åŠŸèƒ½ï¼Œ20ä¸ªAIç½‘å‹ |
| VIPä¼šå‘˜ | 100Qç‚¹/æœˆ | é‡‘è‰²æ˜µç§°ã€ä¸“å±è£…æ‰®ã€100ä¸ªAIç½‘å‹ã€ç‰¹æ®ŠèŠå¤©æ¨¡å¼ |

### æ¶ˆè´¹é¡¹ç›®æ¸…å•

**é‡‘å¸æ¶ˆè´¹**:
| é¡¹ç›® | ä»·æ ¼ | è¯´æ˜ |
|------|------|------|
| å†œåœºç§å­ | 10-50é‡‘å¸ | ä¸åŒå“è´¨ |
| åŠ é€Ÿæˆç†Ÿ | 20é‡‘å¸ | ç«‹å³æ”¶è· |
| åŸºç¡€å¤´åƒ | 50é‡‘å¸ | æ–°å¢å¤´åƒ |
| åŸºç¡€èƒŒæ™¯ | 100é‡‘å¸ | èŠå¤©èƒŒæ™¯ |

**Qç‚¹æ¶ˆè´¹**:
| é¡¹ç›® | ä»·æ ¼ | è¯´æ˜ |
|------|------|------|
| VIPæœˆå¡ | 100Qç‚¹ | 30å¤©ç‰¹æƒ |
| VIPå¹´å¡ | 1000Qç‚¹ | 365å¤©ç‰¹æƒ |
| ä¸“å±å¤´åƒæ¡† | 50Qç‚¹ | æ°¸ä¹… |
| ä¸“å±ç©ºé—´è£…æ‰® | 80Qç‚¹ | æ°¸ä¹… |
| è§£é”å…¨éƒ¨AIç½‘å‹ | 200Qç‚¹ | 20â†’100ä¸ª |
| ç‰¹æ®ŠèŠå¤©æ¨¡å¼ | 30Qç‚¹ | ç¨€æœ‰æ¨¡å¼ |

### æˆå°±ç³»ç»Ÿç¤ºä¾‹

| æˆå°± | å›¾æ ‡ | æ¡ä»¶ | å¥–åŠ± |
|------|------|------|------|
| è¯ç—¨ | ğŸ’¬ | ç´¯è®¡èŠå¤©100æ¡ | 50é‡‘å¸ + 5Qç‚¹ |
| åƒç¦§ç½‘å‹ | ğŸŒŸ | è¿ç»­ç­¾åˆ°7å¤© | 30é‡‘å¸ + 3Qç‚¹ |
| äººæ°”ç‹ | ğŸ”¥ | ç©ºé—´è¢«è®¿é—®100æ¬¡ | 50é‡‘å¸ + 5Qç‚¹ |
| å†œåœºä¸» | ğŸŒ¾ | å†œåœºæ”¶è·50æ¬¡ | 100é‡‘å¸ + 10Qç‚¹ |

---

## QCIO å†œåœºç³»ç»Ÿè¡¨

### qcio_farm_profiles - å†œåœºæ¡£æ¡ˆè¡¨

**äº‘å‡½æ•°**: `qcio` -> `farm.js`

**ç”¨é€”**: å­˜å‚¨ç”¨æˆ·çš„å†œåœºç­‰çº§ã€ç»éªŒã€åœŸåœ°æ•°é‡ã€è£…é¥°ç­‰åŸºç¡€ä¿¡æ¯

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« | é»˜è®¤å€¼ |
|--------|------|------|------|--------|
| _openid | String | å¾®ä¿¡ç”¨æˆ·å”¯ä¸€æ ‡è¯† | æ˜¯ | - |
| farmLevel | Number | å†œåœºç­‰çº§ | æ˜¯ | 1 |
| farmExp | Number | å†œåœºç»éªŒ | æ˜¯ | 0 |
| unlockedPlots | Number | å·²è§£é”åœŸåœ°æ•°é‡ | æ˜¯ | 6 |
| activeDecorations | Object | æ¿€æ´»çš„è£…é¥°åˆ—è¡¨ | å¦ | {} |
| createTime | Date | å†œåœºåˆ›å»ºæ—¶é—´ | æ˜¯ | serverDate |
| updateTime | Date | æœ€åæ›´æ–°æ—¶é—´ | æ˜¯ | serverDate |

**ç´¢å¼•**: `_openid` (ä¸»é”®)

---

### qcio_farm_plots - å†œåœºåœŸåœ°çŠ¶æ€è¡¨

**äº‘å‡½æ•°**: `qcio` -> `farm.js`

**ç”¨é€”**: å­˜å‚¨æ¯å—åœŸåœ°çš„ä½œç‰©ä¿¡æ¯ã€ç”Ÿé•¿è¿›åº¦

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« | é»˜è®¤å€¼ |
|--------|------|------|------|--------|
| _openid | String | å¾®ä¿¡ç”¨æˆ·å”¯ä¸€æ ‡è¯† | æ˜¯ | - |
| plotIndex | Number | åœŸåœ°ç´¢å¼• (0-23) | æ˜¯ | - |
| status | String | çŠ¶æ€: empty/growing/mature | æ˜¯ | "empty" |
| cropType | String | ä½œç‰©ç±»å‹ ID | å¦ | null |
| cropCategory | String | ä½œç‰©åˆ†ç±»: traditional/mood | å¦ | null |
| plantTime | Date | ç§æ¤æ—¶é—´ | å¦ | null |
| harvestTime | Date | é¢„è®¡æ”¶è·æ—¶é—´ | å¦ | null |

**ç´¢å¼•**: `_openid` + `plotIndex` (å¤åˆç´¢å¼•)

---

### qcio_farm_inventory - å†œåœºä»“åº“è¡¨

**äº‘å‡½æ•°**: `qcio` -> `farm.js`

**ç”¨é€”**: å­˜å‚¨ç”¨æˆ·çš„ç§å­ã€æ”¶è·çš„ä½œç‰©ã€è£…é¥°ç‰©å“

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« | é»˜è®¤å€¼ |
|--------|------|------|------|--------|
| _openid | String | å¾®ä¿¡ç”¨æˆ·å”¯ä¸€æ ‡è¯† | æ˜¯ | - |
| itemType | String | ç±»å‹: seed/crop/decoration | æ˜¯ | - |
| itemId | String | ç‰©å“ ID | æ˜¯ | - |
| quantity | Number | æ•°é‡ | æ˜¯ | 0 |

**ç´¢å¼•**: `_openid` + `itemType` + `itemId` (å¤åˆç´¢å¼•)

---

### qcio_farm_logs - å†œåœºæ“ä½œè®°å½•è¡¨

**äº‘å‡½æ•°**: `qcio` -> `farm.js`

**ç”¨é€”**: è®°å½•å†œåœºæ‰€æœ‰æ“ä½œå†å²ï¼ˆç§æ¤ã€æ”¶è·ã€è´­ä¹°ç­‰ï¼‰

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¿…å¡« | é»˜è®¤å€¼ |
|--------|------|------|------|--------|
| _openid | String | å¾®ä¿¡ç”¨æˆ·å”¯ä¸€æ ‡è¯† | æ˜¯ | - |
| actionType | String | æ“ä½œç±»å‹: plant/harvest/buy/decorate | æ˜¯ | - |
| action | String | æ“ä½œæè¿° | æ˜¯ | - |
| detail | String | æ“ä½œè¯¦æƒ… | å¦ | null |
| icon | String | æ“ä½œå›¾æ ‡ | æ˜¯ | - |
| time | Date | æ“ä½œæ—¶é—´ | æ˜¯ | serverDate |
| timeStr | String | ç›¸å¯¹æ—¶é—´æè¿° | æ˜¯ | - |

**ç´¢å¼•**: `_openid` + `time` (å¤åˆç´¢å¼•ï¼Œç”¨äºæŒ‰æ—¶é—´å€’åºæŸ¥è¯¢)

---

### å†œåœºç­‰çº§é…ç½®

| ç­‰çº§ | æ‰€éœ€ç»éªŒ | è§£é”åœŸåœ° |
|------|----------|----------|
| Lv.1 | 0 | 6å— |
| Lv.2 | 100 | 6å— |
| Lv.3 | 300 | 9å— |
| Lv.5 | 800 | 12å— |
| Lv.10 | 3000 | 15å— |
| Lv.15 | 8000 | 18å— |
| Lv.20 | 15000 | 21å— |
| Lv.30 | 50000 | 24å— |

---

### å†œåœºä½œç‰©é…ç½®

**ä¼ ç»Ÿä½œç‰©**:
| ID | åç§° | æˆæœ¬ | å”®ä»· | å‘¨æœŸ | ç»éªŒ |
|----|------|------|------|------|------|
| wheat | å°éº¦ | 10 | 25 | 30ç§’ | 5 |
| corn | ç‰ç±³ | 20 | 55 | 60ç§’ | 8 |
| tomato | ç•ªèŒ„ | 50 | 150 | 2åˆ†é’Ÿ | 12 |
| pumpkin | å—ç“œ | 100 | 350 | 5åˆ†é’Ÿ | 20 |
| strawberry | è‰è“ | 200 | 700 | 10åˆ†é’Ÿ | 35 |
| cotton | æ£‰èŠ± | 300 | 1200 | 30åˆ†é’Ÿ | 50 |
| sunflower | å‘æ—¥è‘µ | 500 | 2500 | 2å°æ—¶ | 80 |
| grape | è‘¡è„ | 800 | 5000 | 6å°æ—¶ | 150 |
| apple | è‹¹æœ | 1200 | 9000 | 12å°æ—¶ | 250 |
| ginseng | äººå‚ | 2000 | 20000 | 24å°æ—¶ | 500 |

**å¿ƒæƒ…ä½œç‰©**:
| ID | åç§° | æˆæœ¬ | å”®ä»· | å‘¨æœŸ | ç»éªŒ |
|----|------|------|------|------|------|
| sadness | å¿§ä¼¤.exe | 5 | 15 | 1åˆ†é’Ÿ | 3 |
| lonely | å¯‚å¯.bat | 10 | 35 | 30åˆ†é’Ÿ | 8 |
| love | åˆæ‹.dll | 20 | 80 | 1å°æ—¶ | 15 |
| memory | è®°å¿†.dat | 100 | 500 | 3å°æ—¶ | 50 |
| dream | æ¢¦å¢ƒ.exe | 200 | 1500 | 12å°æ—¶ | 150 |
| destiny | å‘½è¿.dll | 500 | 5000 | 24å°æ—¶ | 400 |

---

### å†œåœºè£…é¥°é…ç½®

| ID | åç§° | æˆæœ¬ | ç±»å‹ | æ•ˆæœ |
|----|------|------|------|------|
| fence_wood | æœ¨æ …æ  | 100 | border | none |
| fence_gold | é‡‘æ …æ  | 500 | border | yield_10 |
| scarecrow | ç¨»è‰äºº | 200 | prop | steal_-20 |
| sprinkler | å–·çŒç³»ç»Ÿ | 1000 | prop | speed_15 |
