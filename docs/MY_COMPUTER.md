# 我的电脑 - 功能文档

> Windows 98 风格的虚拟文件系统

---

## 功能概述

"我的电脑"是桌面上的核心组件，提供虚拟文件系统浏览、系统信息查看、磁盘清理等功能，同时隐藏着多个彩蛋等待探索。

---

## 已实现功能

### 1. 系统属性

**入口**：我的电脑窗口 → 文件菜单 → 系统属性

**功能说明**：
- 显示 Windows 98 第二版系统信息
- 显示硬件配置（Pentium III 800MHz、128MB RAM等）
- 显示千禧时光机账号信息（QCIO账号、等级、Q点、网费、时光币、彩蛋进度）
- 数据从云函数实时获取

**弹窗样式**：
```
┌─────────────────────────────────┐
│ 🖥️ 系统属性                  × │
├─────────────────────────────────┤
│ Microsoft Windows 98 第二版     │
│                                 │
│ 💻 硬件信息                     │
│ 处理器：Intel Pentium III 800MHz │
│ 内存：128 MB RAM                 │
│ 硬盘：20GB                       │
│                                 │
│ 🎮 千禧时光机账号信息           │
│ QCIO 账号：12345                 │
│ 等级：LV.15 ⭐⭐⭐               │
│ ...                             │
└─────────────────────────────────┘
```

---

### 2. 磁盘清理

**入口**：我的电脑窗口 → 文件菜单 → 磁盘清理

**功能说明**：
- 每日限制清理 1 次
- 模拟扫描过程（进度条动画）
- 随机生成清理结果（临时文件、缓存文件、旧日志）
- 根据清理大小奖励时光币（40-80时光币）
- 显示磁盘容量变化

**清理流程**：
1. 点击"磁盘清理" → 确认对话框
2. 点击"开始扫描" → 扫描进度动画
3. 扫描完成 → 显示清理结果和奖励
4. 每日只有第一次清理获得奖励

**奖励机制**：
| 项目 | 奖励 |
|------|------|
| 临时文件 | 30-50 时光币 |
| 缓存文件 | 10-20 时光币 |
| 旧日志 | 5-10 时光币 |

---

### 3. 设备管理器

**入口**：我的电脑窗口 → 文件菜单 → 设备管理器

**功能说明**：
- 显示虚拟硬件列表（CPU、内存、显卡、声卡等）
- 点击设备查看详细属性
- 每个设备都有搞笑的"备注"内容
- Win98 树形结构展示

**设备列表**：
- ⚡ CPU - 时光机 CPU v3.7
- 💾 内存 - 256MB SDRAM
- 🎮 显示卡 - GForce MX440
- 🔊 声卡 - 火星文兼容声卡
- 🌐 网卡 - 56K 调制解调器
- 💽 磁盘驱动器 - C/D/USB
- 🖱️ 鼠标 - PS/2 兼容鼠标
- ⌨️ 键盘 - 标准 101/102 键盘

**设备示例备注**：
- CPU: "别嫌慢，这可是2005年的顶配！想要更快的？先把彩蛋找全了再说吧~"
- 内存: "256MB足以运行所有怀旧程序！什么？你要玩3A大作？"

---

### 4. 文件浏览器

**入口**：点击驱动器图标（C盘/D盘/USB）

**功能说明**：
- Win98 风格文件浏览界面
- 菜单栏（文件、编辑、查看、收藏、帮助）
- 工具栏（向上按钮、地址栏）
- 文件列表显示（文件夹、文件图标）
- 状态栏（对象数量统计）
- 面包屑导航支持返回上级

**窗口结构**：
- 标题栏（显示当前路径）
- 菜单栏
- 工具栏
- 文件列表内容区
- 状态栏

**文件夹结构**：
- C盘：Windows、Program Files、系统文件
- D盘：下载、软件、游戏、资料
- USB：学习资料、随机彩蛋文件

---

### 5. 帮助系统

**入口**：我的电脑窗口 → 菜单栏 → 帮助(H)

**功能说明**：
- 驱动器说明
- 系统功能介绍
- 彩蛋提示

---

## 文件目录结构

### C盘 (C:)

```
C:\
├── 📁 Windows
│   ├── 📁 System32
│   │   ├── 📁 Drivers        [禁用：驱动程序，无法访问]
│   │   ├── 📄 cmd.exe        [禁用：命令提示符已禁用]
│   │   ├── 📄 kernel32.dll   [禁用：动态链接库文件]
│   │   ├── 📄 notepad.exe    [禁用：记事本已移除]
│   │   └── 📄 config.sys
│   ├── 📁 Fonts              [禁用：字体太多，加载中...]
│   ├── 📁 Temp               [禁用：临时文件，自动清理中...]
│   ├── 📄 system.ini
│   └── 📄 win.ini
├── 📁 Program Files
│   ├── 📁 千禧时光机
│   │   ├── 📁 data           [禁用：游戏数据，无法修改]
│   │   ├── 📄 QCIO.exe       [禁用：QQ空间模拟器 v3.7]
│   │   ├── 📄 如果当时.exe   [禁用：人生模拟器 v1.0]
│   │   ├── 📄 农场游戏.exe   [禁用：开心农场复刻版]
│   │   └── 📄 changelog.txt
│   ├── 📁 Internet Explorer  [禁用：IE 6.0 - 你正在使用的浏览器]
│   ├── 📁 Windows Media Player [禁用：WMP 9 - 播放器已禁用]
│   ├── 📁 Common Files       [禁用：共享文件，无法访问]
│   └── 📄 readme.txt         [禁用：README文件]
├── 📁 Documents
├── 📄 boot.ini
├── 📄 system.log
└── 📄 config.ini
```

### D盘 (D:)

```
D:\
├── 📁 下载
│   ├── 📄 学习资料.rar       [禁用：压缩包，请解压后查看]
│   ├── 📄 电影合集.zip       [禁用：正在解压...解压失败]
│   ├── 📄 图片包.rar         [禁用：压缩包，请解压后查看]
│   ├── 📄 安装包.exe         [禁用：安装失败，请使用原版光盘]
│   ├── 🖼️ 下载的图片.jpg
│   ├── 🎵 音乐.mp3           [禁用：音频文件，请使用播放器]
│   ├── 🎬 视频.rm            [禁用：视频文件，需要播放器]
│   ├── 📄 破解补丁.zip       [禁用：病毒警告！]
│   └── 📄 未完成下载.dat     [禁用：下载未完成]
├── 📁 软件
│   ├── 📄 十分动听.exe       [禁用：启动"十分动听"播放器]
│   ├── 📄 非主流相机.exe     [禁用：启动"非主流相机"]
│   ├── 📄 QCIO.exe           [禁用：跳转QCIO空间]
│   └── 📄 慢播.exe           [禁用：启动"慢播"]
├── 📁 游戏
│   ├── 📄 俄罗斯方块.exe     [禁用：启动俄罗斯方块]
│   ├── 📄 扫雷.exe           [禁用：启动扫雷]
│   └── 📄 扫雷破解版.exe     [禁用：启动破解版扫雷]
└── 📁 资料
    ├── 📄 毕业论文.doc       [内容：论非主流文化的兴衰...]
    ├── 📄 简历.txt           [内容：求职简历-葬爱·殇...]
    ├── 📄 学习笔记.txt       [内容：火星文学习笔记...]
    ├── 📄 代码备份.zip       [禁用：密码保护，无法打开]
    ├── 📄 电子书合集.chm     [禁用：电子书阅读器未安装]
    ├── 📄 网页模板.htm       [禁用：用浏览器打开]
    ├── 📄 设计作品.psd       [禁用：Photoshop文件，无法打开]
    └── 📄 个人简历.doc       [内容：另一份简历-轻舞飞扬...]
```

### USB

```
USB:\
├── 📁 学习资料
│   ├── 📄 程序设计入门.pdf   [禁用：PDF阅读器未安装]
│   ├── 📄 英语单词.txt       [内容：英语单词本...]
│   └── 📄 毕业论文.doc       [禁用：论文文件]
├── 📁 我的作品               [禁用：文件夹为空]
├── 📄 README.txt             [禁用：使用说明]
└── 📄 快捷方式.lnk           [禁用：快捷方式无效]
```

**文件说明**：
- **禁用文件**：点击时显示提示消息
- **内容文件**：点击时弹出模态框显示内容
- **文件夹**：点击进入下一级目录
- **可读文件**：D盘部分文本文件（论文、简历、笔记）包含怀旧内容

---

## 彩蛋相关

### 已移除的彩蛋文件

根据 v3.8 更新，以下不规范彩蛋文件已从我的电脑中移除：
- `C:\Windows\系统日记.txt`
- `C:\Windows\System32\程序员的遗言.txt`
- `C:\Program Files\千禧时光机\开发者彩蛋.txt`
- `D:\下载\遗忘的文件.rar`
- `D:\资料\青春回忆.txt`
- `USB:\学习资料\那个夏天的回忆.txt`

### 保留的彩蛋系统

彩蛋发现功能已整合到其他模块：
- 回收站清理者彩蛋（回收站页面）
- 桌面交互彩蛋（小狮子、任务栏等）
- 其他位置彩蛋（请参考 EGG_LIST.md）

---

## UI 设计

### 主窗口

- **标题栏**：蓝色渐变背景，显示"我的电脑"标题
- **菜单栏**：文件(F)、编辑(E)、查看(V)、帮助(H)
- **驱动器区**：
  - C盘独占第一行，显示容量条
  - D盘和USB并排显示在第二行
  - 分割线分隔
- **系统信息面板**：处理器、内存、系统、用户信息
- **状态栏**：显示对象数量

### 弹窗设计

所有弹窗均采用 Win98 统一风格：
- 灰色背景 (#c0c0c0)
- 3D 凸起/凹陷边框效果
- 蓝色渐变标题栏
- 标准按钮样式

### 固定高度

- 文件浏览器弹窗：500px（固定）
- 文件列表内容区：350px（固定，超出滚动）

---

## 数据交互

### 云函数调用

**user 云函数**：
- `getSystemInfo`: 获取系统信息和用户数据
- `diskCleanup`: 磁盘清理逻辑
- `checkRecycleBinEgg`: 检查回收站彩蛋

**数据缓存**：
- 用户信息从云函数实时获取（NO CACHE）
- 系统信息固定显示
- 磁盘清理状态本地存储

---

## 开发说明

### 组件结构

```
miniprogram/components/my-computer/
├── index.js           # 主逻辑
├── index.wxml         # 窗口UI
└── index.wxss         # 样式
```

### 主要方法

| 方法 | 说明 |
|------|------|
| `onShowSystemProperties()` | 显示系统属性弹窗 |
| `onShowDiskCleanup()` | 显示磁盘清理确认 |
| `onStartDiskCleanup()` | 开始磁盘清理 |
| `onShowDeviceManager()` | 显示设备管理器 |
| `onShowDeviceDetail()` | 显示设备详情 |
| `onDriveTap()` | 点击驱动器打开文件浏览器 |
| `onFileItemTap()` | 点击文件/文件夹 |
| `onGoBack()` | 返回上级文件夹 |
| `onClose*()` | 关闭各弹窗 |

### 数据字段

| 字段 | 说明 |
|------|------|
| `showSystemProperties` | 系统属性弹窗显示状态 |
| `showDiskCleanupConfirm` | 磁盘清理确认弹窗显示状态 |
| `showDiskCleanupScanning` | 磁盘清理扫描弹窗显示状态 |
| `showDiskCleanupResult` | 磁盘清理结果弹窗显示状态 |
| `showDeviceManager` | 设备管理器弹窗显示状态 |
| `showDeviceDetail` | 设备详情弹窗显示状态 |
| `showFileExplorer` | 文件浏览器弹窗显示状态 |
| `fileExplorerPath` | 当前文件路径 |
| `fileExplorerBreadcrumbs` | 面包屑导航数组 |
| `fileExplorerItems` | 当前目录文件列表 |
| `diskCleanupTodayCount` | 今日已清理次数 |
| `diskCleanupProgress` | 清理进度百分比 |
| `diskCleanupResult` | 清理结果数据 |
| `systemInfo` | 系统硬件信息 |
| `userInfo` | 用户账号信息 |
| `devices` | 设备列表数据 |

---

## 版本历史

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| v3.8 | 2025-12-30 | 移除不规范彩蛋文件，文件浏览器添加菜单栏和状态栏，固定高度 |
| v3.7 | 2025-12-29 | 完善我的电脑功能系统 |
| v3.6 | 2025-12-29 | 初始实现基础功能 |

---

> © 2025 千禧时光机 · 我的电脑功能文档
