# 测试方案

> 完整的功能测试和质量保证计划
>
> 制定日期：2025-12-26

---

## 一、测试策略

### 测试金字塔

```
        /\
       /  \        手动探索测试（少量）
      /____\
     /      \      自动化测试（适量）
    /__________\
   /            \  单元测试（可选）
  /______________\
```

### 小程序测试特点

| 特点 | 说明 |
|------|------|
| **快速迭代** | 不需要复杂的自动化，手动测试更高效 |
| **用户体验** | 需要真实感受交互，自动化难以覆盖 |
| **多设备** | 需要在不同机型测试 |
| **审核要求** | 通过微信开发者工具自检 |

---

## 二、测试类型

### 1. 功能测试

**核心功能**：每个功能都要测试

| 功能模块 | 测试点 |
|----------|--------|
| **桌面** | 图标点击、拖拽、右键菜单 |
| **我的电脑** | 系统信息显示、彩蛋触发 |
| **QCIO** | AI聊天、签名修改、等级提升 |
| **如果当时** | 游戏流程、选择分支、结局展示 |
| **分享** | 海报生成、保存、转发 |
| **彩蛋** | 各彩蛋触发条件、奖励发放 |

### 2. 兼容性测试

| 设备类型 | 测试内容 |
|----------|----------|
| **iOS** | iPhone 12/13/14、不同iOS版本 |
| **Android** | 华为、小米、OPPO、vivo |
| **屏幕尺寸** | 小屏、中屏、大屏、折叠屏 |
| **微信版本** | 最新版、上一版本 |

### 3. 性能测试

| 指标 | 目标 |
|------|------|
| 首屏加载 | < 2秒 |
| 页面切换 | < 500ms |
| 图片加载 | 有占位图 |
| 内存占用 | < 200MB |

### 4. 合规测试

| 检查项 | 说明 |
|--------|------|
| **内容安全** | 无敏感词、违规内容 |
| **类目检查** | 确认为工具类 |
| **文案检查** | 无"游戏""玩家"等词 |
| **隐私检查** | 用户信息合规收集 |

---

## 三、测试工具

### 微信开发者工具自带

| 功能 | 用途 |
|------|------|
| **真机调试** | 在真实设备上测试 |
| **性能监控** | 内存、CPU、帧率 |
| **代码质量** | ESLint检查 |
| **上传前检测** | 自动扫描问题 |

### 辅助工具

| 工具 | 用途 |
|------|------|
| **微信开发者工具** | 主要测试工具 |
| **多台真机** | 不同设备测试 |
| **网络模拟** | 弱网测试（开发者工具自带） |

---

## 四、测试用例清单

### P0 核心流程（必须测试）

```
┌─────────────────────────────────────────────┐
│  用户启动小程序                               │
├─────────────────────────────────────────────┤
│  ✓ 首屏加载正常                              │
│  ✓ 桌面显示正常                              │
│  ✓ 图标可点击                                │
│  ✓ 小狮子显示正常                            │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│  QCIO社交系统                                │
├─────────────────────────────────────────────┤
│  ✓ AI聊天功能正常                            │
│  ✓ 签名修改保存                              │
│  ✓ 等级正常显示                              │
│  ✓ 彩蛋触发正常（rosebud等）                 │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│  如果当时.exe                                │
├─────────────────────────────────────────────┤
│  ✓ 可以开始游戏                              │
│  ✓ 选择生效                                  │
│  ✓ 属性变化正常                              │
│  ✓ 结局正常展示                              │
│  ✓ 分享海报生成                              │
│  ✓ 可以保存图片                              │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│  分享功能                                    │
├─────────────────────────────────────────────┤
│  ✓ 转发给好友                                │
│  ✓ 小程序码可扫描                            │
│  ✓ 带参数分享有效                            │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│  数据保存                                    │
├─────────────────────────────────────────────┤
│  ✓ 关闭后再打开，数据保留                    │
│  ✓ 等级/签名保存                             │
│  ✓ 彩蛋发现记录                              │
└─────────────────────────────────────────────┘
```

### P1 重要功能（尽量测试）

| 功能 | 测试点 |
|------|--------|
| **彩蛋系统** | 小狮子跳舞、说话、蓝屏、时间彩蛋 |
| **CDK兑换** | 输入、验证、激活 |
| **我的电脑** | 系统信息、彩蛋 |
| **网络异常** | 断网、弱网情况 |
| **AI调用** | API失败、超时 |

### P2 边缘情况（有时间再测）

| 功能 | 测试点 |
|------|--------|
| **极端输入** | 超长文本、特殊字符 |
| **并发操作** | 快速连续点击 |
| **内存压力** | 长时间使用 |
| **数据迁移** | 版本升级后数据 |

---

## 五、测试流程

### 开发阶段测试

```
开发完成
    ↓
自测（开发者）
    ↓
真机测试（至少一台iOS、一台Android）
    ↓
修复发现的问题
    ↓
再次测试
```

### 提审前测试

```
所有功能开发完成
    ↓
完整功能测试（用P0清单）
    ↓
多设备兼容性测试
    ↓
性能测试（开发者工具监控）
    ↓
合规自查（文案、内容）
    ↓
开发者工具"上传并检测"
    ↓
修复所有警告和错误
    ↓
准备提交审核
```

---

## 六、测试报告模板

### 测试记录表

| 测试项 | 测试结果 | 问题 | 负责人 | 状态 |
|--------|----------|------|--------|------|
| 首屏加载 | ✅ 通过 | - | - | 完成 |
| QCIO聊天 | ✅ 通过 | - | - | 完成 |
| 游戏流程 | ❌ 失败 | 结局页崩溃 | XX | 待修复 |
| 分享功能 | ✅ 通过 | - | - | 完成 |
| ... | ... | ... | ... | ... |

---

## 七、常见问题检查

### 这些都要测

| 问题 | 检查方式 |
|------|----------|
| **白屏** | 各页面能否正常显示 |
| **崩溃** | 操作过程中是否闪退 |
| **卡顿** | 滑动、切换是否流畅 |
| **图片加载失败** | 网络慢时是否有占位图 |
| **数据丢失** | 关闭重开数据是否保留 |
| **彩蛋失效** | 各彩蛋能否正常触发 |
| **分享失败** | 分享后能否正常打开 |
| **AI无响应** | 网络异常时是否有提示 |

---

## 八、测试时间安排

### 12/29（周日）- 测试日

| 时间 | 任务 |
|------|------|
| 下午2:00-3:00 | P0核心功能测试 |
| 下午3:00-4:00 | 多设备兼容性测试 |
| 下午4:00-5:00 | 修复发现的问题 |
| 下午5:00-6:00 | 回归测试 |

### 12/30（周一）- 最终检查

| 时间 | 任务 |
|------|------|
| 上午 | 性能测试、合规检查 |
| 下午 | 开发者工具自检 |
| 晚上 | 准备提交审核 |

---

## 九、不需要的东西

| ❌ 不需要 | 原因 |
|-----------|------|
| 复杂的自动化测试框架 | 小程序迭代快，不划算 |
| 单元测试 | 代码量不大，手动测更高效 |
| 压力测试 | 个人项目，量级不大 |
| 安全测试 | 云开发自带安全防护 |

---

## 十、测试最佳实践

### 要做的

| ✅ 做法 | 说明 |
|--------|------|
| **边开发边测** | 每完成一个功能就测一遍 |
| **真机测试** | 必须在真实设备上测试 |
| **多设备测试** | 至少iOS和Android各一台 |
| **用户视角** | 模拟真实用户操作 |
| **记录问题** | 发现问题及时记录 |

### 不要做的

| ❌ 做法 | 说明 |
|--------|------|
| 只在模拟器测 | 模拟器和真机有差异 |
| 测完就不管 | 要记录问题和修复状态 |
| 追求100%覆盖 | 核心功能覆盖即可 |
| 过度自动化 | 小程序不适合复杂自动化 |

---

## 十一、快速自检清单

### 提审前5分钟检查

```
□ 在真机上跑一遍核心流程
□ 确认没有明显的bug
□ 确认文案没有"游戏""玩家"
□ 确认所有图片能正常加载
□ 确认AI聊天功能正常
□ 确认分享功能正常
□ 确认没有控制台报错
□ 用开发者工具"上传并检测"
```

---

## 十二、总结

**测试原则**：
- 核心功能必须测
- 真机测试不能少
- 边开发边测试
- 不追求完美，覆盖关键点

**测试目标**：
- 无崩溃、无白屏
- 核心流程可用
- 多设备兼容
- 合规无问题

---

> 测试不是为了找问题，而是为了确保用户有一个好的体验。
>
> © 2025 千禧时光机 · 测试方案
