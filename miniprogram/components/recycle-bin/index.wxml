<!-- 回收站 - Win98 风格窗口组件 -->
<view class="recycle-bin-overlay {{show ? 'show' : 'hide'}}" style="{{overlayStyle}}" catchtap="onClose">
  <view class="win98-window" catchtap="stopPropagation" catchlongpress="stopPropagation" catchtouchmove="stopPropagation">
    <view class="win98-title-bar">
      <view class="win98-title-text">回收站</view>
      <view class="win98-title-controls">
        <button class="win98-btn-close" bindtap="onClose">×</button>
      </view>
    </view>

    <view class="win98-window-body">
      <!-- 工具栏 -->
      <view class="toolbar">
        <view class="toolbar-item">文件(F)</view>
        <view class="toolbar-item">编辑(E)</view>
        <view class="toolbar-item">查看(V)</view>
        <view class="toolbar-item" bindtap="onShowHelp">帮助(H)</view>
      </view>

      <view class="toolbar-divider"></view>

      <!-- 空状态 -->
      <view class="empty-state" wx:if="{{!hasTrash}}">
        <view class="empty-icon">🗑️</view>
        <text class="empty-text">回收站是空的</text>
        <text class="empty-hint">没有删除的文件</text>
      </view>

      <!-- 垃圾文件列表 -->
      <view class="trash-grid" wx:if="{{hasTrash}}">
        <view
          class="trash-item {{item.isSpecial ? 'special-file' : ''}}"
          wx:for="{{trashFiles}}"
          wx:key="index"
          bindtap="onTrashItemTap"
          data-file="{{item}}"
          data-index="{{index}}"
        >
          <view class="trash-icon">{{item.icon}}</view>
          <text class="trash-label">{{item.name}}</text>
          <text class="trash-date">{{item.date}}</text>
        </view>
      </view>

      <!-- 清空按钮 -->
      <view class="action-buttons" wx:if="{{hasTrash}}">
        <button class="win98-button" bindtap="emptyRecycleBin">清空回收站</button>
      </view>
    </view>

    <!-- 状态栏 -->
    <view class="status-bar">
      <text>{{hasTrash ? trashFiles.length + ' 个对象' : '0 个对象'}}</text>
    </view>
  </view>

  <!-- 帮助弹窗 -->
  <view class="win98-dialog-overlay {{showHelpDialog ? 'show' : ''}}" wx:if="{{showHelpDialog}}" catchtap="onCloseHelpDialog">
    <view class="win98-window help-dialog" catchtap="stopPropagation">
      <view class="win98-title-bar">
        <view class="win98-title-text">💡 回收站 - 帮助</view>
        <view class="win98-title-controls">
          <button class="win98-btn-close" bindtap="onCloseHelpDialog">×</button>
        </view>
      </view>
      <view class="win98-window-body">
        <scroll-view class="help-content" scroll-y>
          <text class="help-title">回收站</text>
          <text class="help-text">暂存已删除的文件，可以恢复或永久删除。</text>

          <view class="help-section">
            <text class="help-section-title">📁 文件管理</text>
            <view class="help-features">
              <text class="help-feature">• 删除的文件会自动移到回收站</text>
              <text class="help-feature">• 可以从回收站恢复文件到原位置</text>
              <text class="help-feature">• 清空回收站将永久删除所有文件</text>
            </view>
          </view>

          <view class="help-section">
            <text class="help-section-title">🗑️ 清空回收站</text>
            <view class="help-features">
              <text class="help-feature">• 点击"清空回收站"按钮永久删除所有文件</text>
              <text class="help-feature">• 清空后无法恢复文件</text>
              <text class="help-feature">• 回收站为空时无法清空</text>
            </view>
          </view>

          <view class="help-section">
            <text class="help-section-title">🎮 彩蛋提示</text>
            <view class="help-features">
              <text class="help-feature">• 清空回收站可能发现隐藏彩蛋</text>
              <text class="help-feature">• 坚持探索桌面各个角落...</text>
            </view>
          </view>
        </scroll-view>
        <view class="dialog-actions">
          <button class="win98-btn-std" bindtap="onCloseHelpDialog">确定</button>
        </view>
      </view>
    </view>
  </view>

  <!-- 彩蛋发现弹窗 -->
  <egg-discovery-dialog
    show="{{showEggDiscoveryDialog}}"
    eggName="{{eggDiscoveryData.name}}"
    eggDescription="{{eggDiscoveryData.description}}"
    eggRarity="{{eggDiscoveryData.rarity}}"
    eggRarityName="{{eggDiscoveryData.rarityName}}"
    eggRewardText="{{eggDiscoveryData.rewardText}}"
    bindclose="hideEggDiscoveryDialog">
  </egg-discovery-dialog>

  <!-- 还原确认弹窗 -->
  <view class="win98-dialog-overlay {{showRestoreDialog ? 'show' : ''}}" wx:if="{{showRestoreDialog}}" catchtap="cancelRestoreSecretBook">
    <view class="win98-window restore-dialog" catchtap="stopPropagation">
      <view class="win98-title-bar">
        <view class="win98-title-text">确认还原</view>
        <view class="win98-title-controls">
          <button class="win98-btn-close" bindtap="cancelRestoreSecretBook">×</button>
        </view>
      </view>
      <view class="win98-window-body">
        <view class="restore-content">
          <view class="restore-icon">📜</view>
          <text class="restore-title">彩蛋秘籍第二册.txt</text>
          <text class="restore-message">是否要还原此文件？</text>
          <text class="restore-hint">还原后将出现在我的文档/彩蛋文件夹中</text>
        </view>
        <view class="dialog-actions">
          <button class="win98-btn-std" bindtap="cancelRestoreSecretBook">取消</button>
          <button class="win98-btn-std win98-btn-primary" bindtap="confirmRestoreSecretBook">还原</button>
        </view>
      </view>
    </view>
  </view>
</view>
