<!-- 回收站 - Win98 风格窗口组件 -->
<view class="recycle-bin-overlay {{show ? 'show' : 'hide'}}" style="{{overlayStyle}}" catchtap="onClose">
  <view class="win98-window" catchtap="stopPropagation" catchlongpress="stopPropagation" catchtouchmove="stopPropagation">
    <view class="win98-title-bar">
      <view class="win98-title-text">回收站</view>
      <view class="win98-title-controls">
        <button class="win98-btn-close" bindtap="onClose">×</button>
      </view>
    </view>

    <view class="win98-window-body">
      <!-- 工具栏 -->
      <view class="toolbar">
        <view class="toolbar-item">文件(F)</view>
        <view class="toolbar-item">编辑(E)</view>
        <view class="toolbar-item">查看(V)</view>
        <view class="toolbar-item" bindtap="onShowHelp">帮助(H)</view>
      </view>

      <view class="toolbar-divider"></view>

      <!-- 空状态 -->
      <view class="empty-state" wx:if="{{trashFiles.length === 0}}">
        <view class="empty-icon">🗑️</view>
        <text class="empty-text">回收站是空的</text>
        <text class="empty-hint">所有文件都已被清理</text>
      </view>

      <!-- 垃圾文件列表 -->
      <view class="trash-grid" wx:if="{{trashFiles.length > 0}}">
        <view class="trash-item" wx:for="{{trashFiles}}" wx:key="id">
          <view class="trash-icon">{{item.icon}}</view>
          <text class="trash-label">{{item.name}}</text>
          <text class="trash-date">{{item.date}}</text>

          <!-- 普通文件：只显示删除按钮 -->
          <view class="file-actions" wx:if="{{!item.isSpecial}}">
            <view
              class="action-btn delete-btn"
              bindtap="deleteFile"
              data-index="{{index}}">
              删除
            </view>
          </view>

          <!-- 彩蛋秘籍：只显示恢复按钮 -->
          <view class="file-actions" wx:if="{{item.isSpecial}}">
            <view
              class="action-btn restore-btn"
              bindtap="restoreFile"
              data-index="{{index}}">
              恢复
            </view>
          </view>
        </view>
      </view>

      <!-- 提示信息 -->
      <view class="tip-box" wx:if="{{trashFiles.length > 0}}">
        <text class="tip-text">💡 需要手动清理每个文件，寻找隐藏的彩蛋秘籍...</text>
      </view>
    </view>

    <!-- 状态栏 -->
    <view class="status-bar">
      <text>{{trashFiles.length + ' 个对象'}}</text>
    </view>
  </view>

  <!-- 恢复确认弹窗 -->
  <view class="win98-dialog-overlay {{showRestoreDialog ? 'show' : ''}}" wx:if="{{showRestoreDialog}}" catchtap="onCancelRestore">
    <view class="win98-window confirm-dialog" catchtap="stopPropagation">
      <view class="win98-title-bar">
        <view class="win98-title-text">确认恢复</view>
        <view class="win98-title-controls">
          <button class="win98-btn-close" bindtap="onCancelRestore">×</button>
        </view>
      </view>
      <view class="win98-window-body">
        <view class="confirm-content">
          <view class="confirm-icon">⚠️</view>
          <text class="confirm-message">确定要恢复"{{restoreFile.name}}"吗？</text>
        </view>
        <view class="dialog-actions">
          <view class="win98-btn-std" bindtap="onCancelRestore">取消</view>
          <view class="win98-btn-std" bindtap="onConfirmRestore">确定</view>
        </view>
      </view>
    </view>
  </view>

  <!-- 帮助弹窗 -->
  <view class="win98-dialog-overlay {{showHelpDialog ? 'show' : ''}}" wx:if="{{showHelpDialog}}" catchtap="onCloseHelpDialog">
    <view class="win98-window help-dialog" catchtap="stopPropagation">
      <view class="win98-title-bar">
        <view class="win98-title-text">💡 回收站 - 帮助</view>
        <view class="win98-title-controls">
          <button class="win98-btn-close" bindtap="onCloseHelpDialog">×</button>
        </view>
      </view>
      <view class="win98-window-body">
        <scroll-view class="help-content" scroll-y>
          <text class="help-title">回收站</text>
          <text class="help-text">手动清理回收站，发现隐藏的彩蛋秘籍。</text>

          <view class="help-section">
            <text class="help-section-title">📁 文件管理</text>
            <view class="help-features">
              <text class="help-feature">• 点击"删除"按钮永久删除文件</text>
              <text class="help-feature">• 点击"恢复"按钮将文件恢复到原位置</text>
              <text class="help-feature">• 某些特殊文件无法删除，只能恢复</text>
            </view>
          </view>

          <view class="help-section">
            <text class="help-section-title">🗑️ 清理奖励</text>
            <view class="help-features">
              <text class="help-feature">• 累计删除5个文件可获得特殊成就</text>
              <text class="help-feature">• 寻找隐藏的"彩蛋秘籍第二册"</text>
              <text class="help-feature">• 秘籍只能恢复，不能删除</text>
            </view>
          </view>

          <view class="help-section">
            <text class="help-section-title">🎮 彩蛋提示</text>
            <view class="help-features">
              <text class="help-feature">• 耐心清理，你可能会发现惊喜</text>
              <text class="help-feature">• 某些文件可能承载着特殊回忆</text>
            </view>
          </view>
        </scroll-view>
        <view class="dialog-actions">
          <button class="win98-btn-std" bindtap="onCloseHelpDialog">确定</button>
        </view>
      </view>
    </view>
  </view>

  <!-- 彩蛋发现弹窗 -->
  <egg-discovery-dialog
    show="{{showEggDiscoveryDialog}}"
    eggName="{{eggDiscoveryData.name}}"
    eggDescription="{{eggDiscoveryData.description}}"
    eggRarity="{{eggDiscoveryData.rarity}}"
    eggRarityName="{{eggDiscoveryData.rarityName}}"
    eggRewardText="{{eggDiscoveryData.rewardText}}"
    bindclose="hideEggDiscoveryDialog">
  </egg-discovery-dialog>
</view>
