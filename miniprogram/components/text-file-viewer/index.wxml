<!-- 文本文件查看器组件 -->
<view class="text-viewer-overlay {{show ? 'show' : 'hide'}}" catchtap="onClose">
  <view class="win98-window" catchtap="stopPropagation" catchlongpress="stopPropagation" catchtouchmove="stopPropagation">
    <view class="win98-title-bar">
      <view class="win98-title-text">{{fileName}} - 记事本</view>
      <view class="win98-title-controls">
        <button class="win98-btn-close" bindtap="onClose">×</button>
      </view>
    </view>

    <!-- 菜单栏 (暂未实现功能，先隐藏) -->
    <!-- <view class="menu-bar">
      <text class="menu-item">文件(F)</text>
      <text class="menu-item">编辑(E)</text>
      <text class="menu-item">搜索(S)</text>
      <text class="menu-item">帮助(H)</text>
    </view> -->

    <view class="win98-window-body">
      <!-- 文本内容区域 - 使用 scroll-view 支持滚动 -->
      <scroll-view class="text-content" scroll-y>
        <!-- 彩蛋秘籍第一册内容 -->
        <view wx:if="{{isSecretFile && fileName === '彩蛋秘籍-第一册.txt'}}">
          <text class="preview-title">          千禧时光机 - 彩蛋秘籍</text>
          <text class="preview-title">               【第一册】</text>

          <text class="preview-line"></text>
          <text class="preview-section">【普通彩蛋达成方案】(6/10)</text>

          <!-- 彩蛋1 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">🦁 舞动的小狮子 (1000💎)</text>
            <text class="secret-egg-method">   → 在桌面找到小狮子助手，连续点击3-5次</text>
          </view>

          <!-- 彩蛋2 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">💬 它会说话 (1000💎)</text>
            <text class="secret-egg-method">   → 长按桌面上的小狮子助手不松手</text>
          </view>

          <!-- 彩蛋3 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">📂 底部秘密 (1000💎)</text>
            <text class="secret-egg-method">   → 连续点击底部任务栏的空白区域3次以上</text>
          </view>

          <!-- 彩蛋4 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">🎨 换了个心情 (500💎)</text>
            <text class="secret-egg-method">   → 双击桌面空白处切换背景，重复5次以上</text>
          </view>

          <!-- 彩蛋5 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">🗑️ 垃圾清理员 (400💎)</text>
            <text class="secret-egg-method">   → 连续点击桌面上的回收站图标多次</text>
          </view>

          <!-- 彩蛋6 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">💻 电脑专家 (400💎)</text>
            <text class="secret-egg-method">   → 连续点击桌面上的我的电脑图标多次</text>
          </view>

          <text class="preview-line"></text>
          <text class="preview-line">   祝你发现所有彩蛋！</text>
          <text class="preview-line"></text>
        </view>

        <!-- 彩蛋秘籍第二册内容 -->
        <view wx:elif="{{fileName === '彩蛋秘籍-第二册.txt'}}">
          <text class="preview-title">          千禧时光机 - 彩蛋秘籍</text>
          <text class="preview-title">               【第二册】</text>

          <text class="preview-line"></text>
          <text class="preview-section">【普通彩蛋达成方案】(6/10)</text>

          <!-- 火星翻译大师 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">🪐 火星文大师 (700💎)</text>
            <text class="secret-egg-method">   → 使用火星翻译功能10次</text>
          </view>

          <!-- 网费兑换者 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">💰 网费兑换者 (500💎)</text>
            <text class="secret-egg-method">   → 首次在网管系统兑换网费</text>
          </view>

          <!-- 网瘾少年 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">🌐 网瘾少年 (400💎)</text>
            <text class="secret-egg-method">   → 连续点击桌面上的浏览器图标多次</text>
          </view>

          <!-- 非主流达人 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">📸 非主流达人 (800💎)</text>
            <text class="secret-egg-method">   → 在非主流相机连续保存5张照片</text>
          </view>

          <!-- 开始菜单爱好者 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">🚀 开始菜单爱好者 (500💎)</text>
            <text class="secret-egg-method">   → 累计打开开始菜单20次</text>
          </view>

          <!-- 踩空间达人 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">👣 踩空间达人 (600💎)</text>
            <text class="secret-egg-method">   → 累计访问QCIO空间10次</text>
          </view>

          <text class="preview-line"></text>
          <text class="preview-line">   更多彩蛋等待探索...</text>
          <text class="preview-line"></text>
        </view>

        <!-- 彩蛋秘籍第三册内容 -->
        <view wx:elif="{{fileName === '彩蛋秘籍-第三册.txt'}}">
          <text class="preview-title">          千禧时光机 - 彩蛋秘籍</text>
          <text class="preview-title">               【第三册】</text>

          <text class="preview-line"></text>
          <text class="preview-section">【C盘彩蛋达成方案】(5/5)</text>

          <!-- 隐藏的角落 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">👁️ 隐藏的角落 (300💎)</text>
            <text class="secret-egg-method">   → 在我的电脑中，点击"查看"菜单，选择"显示所有文件"</text>
            <text class="secret-egg-method">   → 然后查看C盘根目录，会发现以点开头的隐藏文件</text>
          </view>

          <!-- 空空如也 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">📁 空空如也 (200💎)</text>
            <text class="secret-egg-method">   → 进入C:\Windows目录</text>
            <text class="secret-egg-method">   → 仔细寻找一个空名称的文件夹（看起来是空白）</text>
          </view>

          <!-- 套娃专家 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">🪆 套娃专家 (400💎)</text>
            <text class="secret-egg-method">   → 进入C:\Windows\Temp目录</text>
            <text class="secret-egg-method">   → 连续进入子目录4层深（深层 → 更深层 → 最深层 → 核心层）</text>
          </view>

          <!-- 耐心的人 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">⏳ 耐心的人 (100💎)</text>
            <text class="secret-egg-method">   → 进入C:\Windows目录</text>
            <text class="secret-egg-method">   → 找到system.ini文件，长按3秒不松手</text>
          </view>

          <!-- 执着的人 -->
          <view class="secret-egg-item">
            <text class="secret-egg-name">💪 执着的人 (300💎)</text>
            <text class="secret-egg-method">   → 进入C:\Windows目录</text>
            <text class="secret-egg-method">   → 找到Fonts文件夹，连续点击10次</text>
          </view>

          <text class="preview-line"></text>
          <text class="preview-line">   C盘的秘密已全部揭开！</text>
          <text class="preview-line"></text>
        </view>

        <!-- 彩蛋大全内容 -->
        <view wx:else>
          <text class="preview-title">          千禧时光机 - 彩蛋大全</text>

          <text class="preview-line"></text>

          <!-- 我的排名 -->
          <text class="preview-section">【🏆 我的探索成就】</text>
          <view class="my-rank-section">
            <view class="rank-row">
              <text class="rank-label">已发现彩蛋</text>
              <text class="rank-value">{{discovered}}<text class="rank-slash">/</text>{{total}}</text>
              <text class="rank-unit">个</text>
            </view>
            <view class="rank-row" wx:if="{{discovered > 0 && myRank > 0 && myRank <= 100}}">
              <text class="rank-label">全平台排名</text>
              <text class="rank-value highlight">第{{myRank}}</text>
              <text class="rank-unit">名</text>
            </view>
            <view class="rank-row" wx:if="{{discovered > 0 && myRank > 100}}">
              <text class="rank-label">全平台排名</text>
              <text class="rank-value warning">未进入前100</text>
              <text class="rank-unit">(第{{myRank}}名)</text>
            </view>
          </view>

          <text class="preview-line"></text>

          <!-- 普通彩蛋 -->
          <text class="preview-section">【普通彩蛋】</text>
          <view class="egg-list-section">
            <view wx:for="{{eggList}}" wx:key="id" wx:if="{{item.rarity === 'common'}}" class="egg-item {{item.discovered ? 'discovered' : 'undiscovered'}}">
              <text class="egg-status">{{item.discovered ? '✅' : '❓'}}</text>
              <view class="egg-info">
                <text class="egg-name">{{item.name}}</text>
                <text wx:if="{{item.discovered}}" class="egg-hint">   → {{item.hint}}</text>
              </view>
            </view>
          </view>

          <text class="preview-line"></text>

          <!-- 稀有彩蛋 -->
          <text class="preview-section">【稀有彩蛋】</text>
          <view class="egg-list-section">
            <view wx:for="{{eggList}}" wx:key="id" wx:if="{{item.rarity === 'rare'}}" class="egg-item {{item.discovered ? 'discovered' : 'undiscovered'}}">
              <text class="egg-status">{{item.discovered ? '✅' : '❓'}}</text>
              <view class="egg-info">
                <text class="egg-name">{{item.name}}</text>
                <text wx:if="{{item.discovered}}" class="egg-hint">   → {{item.hint}}</text>
              </view>
            </view>
          </view>

          <text class="preview-line"></text>

          <!-- 史诗彩蛋 -->
          <text class="preview-section">【史诗彩蛋】</text>
          <view class="egg-list-section">
            <view wx:for="{{eggList}}" wx:key="id" wx:if="{{item.rarity === 'epic'}}" class="egg-item {{item.discovered ? 'discovered' : 'undiscovered'}}">
              <text class="egg-status">{{item.discovered ? '✅' : '❓'}}</text>
              <view class="egg-info">
                <text class="egg-name">{{item.name}}</text>
                <text wx:if="{{item.discovered}}" class="egg-hint">   → {{item.hint}}</text>
              </view>
            </view>
          </view>

          <text class="preview-line"></text>

          <!-- 传说彩蛋 -->
          <text class="preview-section">【传说彩蛋】</text>
          <view class="egg-list-section">
            <view wx:for="{{eggList}}" wx:key="id" wx:if="{{item.rarity === 'legendary'}}" class="egg-item {{item.discovered ? 'discovered' : 'undiscovered'}}">
              <text class="egg-status">{{item.discovered ? '✅' : '❓'}}</text>
              <view class="egg-info">
                <text class="egg-name">{{item.name}}</text>
                <text wx:if="{{item.discovered}}" class="egg-hint">   → {{item.hint}}</text>
              </view>
            </view>
          </view>

          <text class="preview-line"></text>
          <text class="preview-line">   已发现: {{discovered}}/{{total}} 个彩蛋</text>
          <text class="preview-line"></text>
        </view>
      </scroll-view>
    </view>

    <!-- 状态栏 -->
    <view class="status-bar">
      <text>Ln 1, Col 1</text>
    </view>
  </view>
</view>
