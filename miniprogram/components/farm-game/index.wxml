<view class="page-game">
  <!-- æ¸¸æˆå¤´éƒ¨ -->
  <view class="game-header">
    <view class="game-stats">
      <text class="stat-item level">LV.{{farmLevel}}</text>
      <text class="stat-item coins">ğŸª™ {{farmCoins}}</text>
    </view>
    <!-- æ˜¾ç¤ºå½“å‰è®¿é—®çš„é¡µé¢æ ‡é¢˜ -->
    <view class="game-title">{{isVisiting ? 'NET: ' + neighborFarm.name : 'LOCAL: MY GARDEN'}}</view>
  </view>

  <!-- æ¸¸æˆé€šçŸ¥ -->
  <view class="game-msg">> {{farmMessage}}</view>

  <!-- å†œç”°ç½‘æ ¼ -->
  <view class="farm-grid">
      <block wx:for="{{isVisiting ? neighborFarm.plots : farmPlots}}" wx:key="id">
      <view class="plot-cell status-{{item.status}}" bindtap="onPlotTap" data-index="{{index}}">
        <view class="grid-lines"></view>
        <view class="plant-container">
          <view wx:if="{{item.status === 0}}" class="dirt-hint">EMPTY</view>
          <view wx:if="{{item.status === 1}}" class="plant-growing">
            <text class="emoji-seed">ğŸŒ±</text>
          </view>
          <view wx:if="{{item.status === 2}}" class="plant-ripe shake-anim">
            <text class="emoji-fruit">{{item.cropType === 'neon_shroom' ? 'ğŸ„' : (item.cropType === 'cyber_flower' ? 'ğŸŒ¹' : (item.cropType === 'quantum_berry' ? 'ğŸ‡' : 'ğŸ’'))}}</text>
          </view>
        </view>
      </view>
    </block>
  </view>

  <!-- æ¸¸æˆæ§åˆ¶æ  -->
  <view class="game-controls">
    <block wx:if="{{!isVisiting}}">
        <button class="game-btn visit-btn" bindtap="visitNeighbor">ğŸŒ VISIT NEIGHBOR</button>
    </block>
    <block wx:else>
        <button class="game-btn home-btn" bindtap="returnToFarm">ğŸ  RETURN HOME</button>
    </block>
  </view>
</view>

<!-- å•†åº—å¼¹çª— (æ¸¸æˆå†…) -->
<view class="shop-modal" wx:if="{{showShopModal}}">
  <view class="shop-window">
    <view class="shop-title">SEEDS <text bindtap="closeShop">X</text></view>
    <view class="seed-list">
      <view class="seed-item" bindtap="plantSeed" data-type="neon_shroom">
        <text>ğŸ„ Shroom (10s)</text> <text class="cost">10c</text>
      </view>
      <view class="seed-item" bindtap="plantSeed" data-type="cyber_flower">
        <text>ğŸŒ¹ Rose (30s)</text> <text class="cost">30c</text>
      </view>
      <view class="seed-item" bindtap="plantSeed" data-type="quantum_berry">
        <text>ğŸ‡ Berry (60s)</text> <text class="cost">100c</text>
      </view>
      <view class="seed-item" bindtap="plantSeed" data-type="void_crystal">
        <text>ğŸ’ Crystal (2m)</text> <text class="cost">500c</text>
      </view>
    </view>
  </view>
</view>