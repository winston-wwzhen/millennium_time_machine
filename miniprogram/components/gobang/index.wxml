<view class="gobang-component" wx:if="{{show}}" style="z-index: {{zIndex}};" catchtap="stopPropagation" catchlongtap="stopPropagation" catchlongpress="stopPropagation">
  <!-- Win98 Á™óÂè£ -->
  <view class="win98-window gobang-window">
    <!-- Ê†áÈ¢òÊ†è -->
    <view class="win98-title-bar">
      <view class="win98-title-text">üéÆ ‰∏â‰∫∫‰∫îÂ≠êÊ£ã</view>
      <view class="win98-title-controls">
        <button class="win98-btn-close" bindtap="onClose">√ó</button>
      </view>
    </view>

    <!-- Á™óÂè£ÂÜÖÂÆπ -->
    <view class="win98-window-body">
      <!-- Ê∏∏ÊàèÊéßÂà∂Èù¢Êùø -->
      <view class="game-controls">
        <!-- Áé©ÂÆ∂Áä∂ÊÄÅÊòæÁ§∫ -->
        <view class="player-status">
          <view class="player-badge {{currentPlayer === 1 ? 'active' : ''}} p1">
            <view class="player-dot black"></view>
            <text class="player-name">Áé©ÂÆ∂ (Èªë)</text>
          </view>
          <view class="player-badge {{currentPlayer === 2 ? 'active' : ''}} p2">
            <view class="player-dot white"></view>
            <text class="player-name">ÁîµËÑë1 (ÁôΩ)</text>
          </view>
          <view class="player-badge {{currentPlayer === 3 ? 'active' : ''}} p3">
            <view class="player-dot red"></view>
            <text class="player-name">ÁîµËÑë2 (Á∫¢)</text>
          </view>
        </view>

        <!-- ÈöæÂ∫¶ÈÄâÊã©ÂíåÈáçÁΩÆÊåâÈíÆ -->
        <view class="control-buttons">
          <view class="difficulty-selector">
            <text class="control-label">ÈöæÂ∫¶:</text>
            <view class="win98-dropdown">
              <view class="dropdown-trigger" bindtap="toggleDropdown">
                <text class="dropdown-value">{{difficultyOptions[difficultyIndex]}}</text>
                <text class="dropdown-arrow {{showDropdown ? 'open' : ''}}">‚ñæ</text>
              </view>
              <view class="dropdown-menu {{showDropdown ? 'show' : ''}}" catchtap="stopPropagation">
                <view
                  class="dropdown-item {{difficultyIndex === 0 ? 'selected' : ''}}"
                  bindtap="selectDifficulty"
                  data-index="0"
                >
                  <view class="item-dot easy"></view>
                  <text class="item-text">ÁÆÄÂçï</text>
                  <text class="item-check" wx:if="{{difficultyIndex === 0}}">‚úì</text>
                </view>
                <view
                  class="dropdown-item {{difficultyIndex === 1 ? 'selected' : ''}}"
                  bindtap="selectDifficulty"
                  data-index="1"
                >
                  <view class="item-dot medium"></view>
                  <text class="item-text">‰∏≠Á≠â</text>
                  <text class="item-check" wx:if="{{difficultyIndex === 1}}">‚úì</text>
                </view>
                <view
                  class="dropdown-item {{difficultyIndex === 2 ? 'selected' : ''}}"
                  bindtap="selectDifficulty"
                  data-index="2"
                >
                  <view class="item-dot hard"></view>
                  <text class="item-text">Âõ∞Èöæ</text>
                  <text class="item-check" wx:if="{{difficultyIndex === 2}}">‚úì</text>
                </view>
              </view>
            </view>
          </view>
          <button class="win98-btn-std restart-btn" bindtap="restartGame">ÈáçÊñ∞ÂºÄÂßã</button>
        </view>
      </view>

      <!-- Ê£ãÁõòÂå∫Âüü -->
      <view class="board-container {{showGameOver ? 'canvas-hidden' : ''}}">
        <canvas
          type="2d"
          id="gobangCanvas"
          class="game-canvas {{showGameOver ? 'canvas-blur' : ''}}"
          bindtouchstart="onCanvasTouchStart"
          bindtouchmove="onCanvasTouchMove"
          bindtouchend="onCanvasTouchEnd"
        ></canvas>
      </view>
    </view>
  </view>

  <!-- Ê∏∏ÊàèÁªìÊùüÂºπÁ™ó -->
  <view class="win98-overlay" wx:if="{{showGameOver}}" bindtap="hideGameOver" catchlongtap="stopPropagation">
    <view class="win98-window game-over-dialog" catchtap="stopPropagation">
      <view class="win98-title-bar">
        <view class="win98-title-text">üèÜ Ê∏∏ÊàèÁªìÊùü</view>
        <view class="win98-title-controls">
          <button class="win98-btn-close" bindtap="hideGameOver">√ó</button>
        </view>
      </view>
      <view class="win98-window-body">
        <view class="game-over-content">
          <view class="winner-icon {{winnerClass}}">{{winnerIcon}}</view>
          <text class="winner-title">{{winnerTitle}}</text>
          <text class="winner-subtitle">{{winnerSubtitle}}</text>
        </view>
        <view class="dialog-actions">
          <button class="win98-btn-std" bindtap="restartGame">ÂÜçÊù•‰∏ÄÂ±Ä</button>
        </view>
      </view>
    </view>
  </view>
</view>
