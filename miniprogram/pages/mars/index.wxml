<view 
  wx:if="{{isMenuOpen}}" 
  class="menu-mask" 
  bindtap="closeMenu"
></view>

<view class="desktop">
  
  <view class="window-frame">
    <view class="title-bar">
      <view class="title-text">è½¬æ¢å™¨.exe - [{{currentModeLabel}}]</view>
      <view class="btn-close" bindtap="goBack">Ã—</view>
    </view>

    <view class="menu-bar">
      <view class="menu-container">
        <text 
          class="menu-item {{isMenuOpen ? 'active' : ''}}" 
          catchtap="toggleMenu"
        >æ¨¡å¼(M)</text>

        <view class="dropdown-menu" wx:if="{{isMenuOpen}}">
          <block wx:for="{{modes}}" wx:key="key">
            <view 
              class="dropdown-item {{modeIndex === index ? 'selected' : ''}}" 
              hover-class="item-hover"
              data-index="{{index}}"
              catchtap="onModeSelect"
            >
              {{item.label}}
            </view>
          </block>
        </view>
      </view>

      <text class="menu-item disabled">å¸®åŠ©(H)</text>
    </view>

    <view class="window-body">
      
      <view class="label">è¯·è¾“å…¥å†…å®¹ï¼š</view>
      <textarea 
        class="input-area" 
        placeholder="åœ¨æ­¤è¾“å…¥éœ€è¦è½¬æ¢çš„æ–‡å­—..." 
        placeholder-style="color:#808080;"
        bindinput="onInput"
        value="{{inputText}}"
        maxlength="200"
      ></textarea>

      <view class="action-area">
        <view 
          class="retro-btn {{isLoading ? 'disabled-btn' : ''}}" 
          hover-class="btn-hover" 
          bindtap="startConvert"
        >
          {{isLoading ? 'â³ æ­£åœ¨æ–½æ³•...' : 'âš¡ å¼€å§‹è½¬æ¢ âš¡'}}
        </view>
      </view>

      <view class="output-area">
        <text user-select="true">{{outputText}}</text>
      </view>

      <view 
        style="display: flex; justify-content: flex-end; margin-top: 8px;" 
        wx:if="{{outputText && outputText !== 'ç­‰å¾…è¾“æ‰–...'}}"
      >
        <view 
          class="retro-btn" 
          hover-class="btn-hover" 
          bindtap="copyToClipboard" 
          style="padding: 4px 12px; font-size: 12px;"
        >
          ğŸ“„ å¤åˆ¶ç»“æœ
        </view>
      </view>

    </view>

    <view class="status-bar">
      <text>{{statusText}}</text>
    </view>
  </view>

</view>