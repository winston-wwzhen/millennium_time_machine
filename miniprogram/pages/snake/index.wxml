<view class="snake-container">
  <!-- 游戏窗口 -->
  <view class="game-window">
    <view class="win98-title-bar">
      <view class="win98-title-text">贪吃蛇 - Retro Snake</view>
      <view class="win98-title-controls">
        <button class="win98-btn-close" bindtap="goBack"></button>
      </view>
    </view>

    <view class="win98-window-body game-body">
      <!-- 分数显示 -->
      <view class="score-bar">
        <view class="score-item">
          <text class="score-label">得分</text>
          <text class="score-value">{{score}}</text>
        </view>
        <view class="score-item">
          <text class="score-label">最高</text>
          <text class="score-value">{{highScore}}</text>
        </view>
      </view>

      <!-- 游戏板 -->
      <view class="game-board" style="width: {{20 * 15}}px; height: {{20 * 15}}px;">
        <!-- 网格 -->
        <view class="grid-cell" wx:for="{{20 * 20}}" wx:key="*this"
          style="left: {{(index % 20) * 15}}px; top: {{Math.floor(index / 20) * 15}}px;">
        </view>

        <!-- 蛇 -->
        <view class="snake-segment" wx:for="{{snake}}" wx:key="index"
          style="left: {{item.x * 15}}px; top: {{item.y * 15}}px; width: 15px; height: 15px; background: {{index === 0 ? '#00cc00' : '#00ff00'}};">
        </view>

        <!-- 食物 -->
        <view class="food" wx:if="{{food}}"
          style="left: {{food.x * 15 + 2}}px; top: {{food.y * 15 + 2}}px; width: 11px; height: 11px; background: #ff0000; border-radius: 50%;">
        </view>

        <!-- 游戏结束遮罩 -->
        <view class="game-over-overlay" wx:if="{{isGameOver}}">
          <view class="game-over-dialog">
            <view class="dialog-title">游戏结束!</view>
            <view class="final-score">得分: {{score}}</view>
            <view class="high-score-display" wx:if="{{score >= highScore && score > 0}}">
              <text>🏆 新纪录!</text>
            </view>
            <button class="win98-btn-primary restart-btn" bindtap="restartGame">再来一局</button>
            <button class="win98-btn-std" bindtap="goBack">返回</button>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 控制按钮 -->
  <view class="game-controls">
    <view class="control-row">
      <button class="control-btn" bindtap="changeDirection" data-dir="up">▲</button>
    </view>
    <view class="control-row">
      <button class="control-btn" bindtap="changeDirection" data-dir="left">◀</button>
      <button class="control-btn" bindtap="changeDirection" data-dir="down">▼</button>
      <button class="control-btn" bindtap="changeDirection" data-dir="right">▶</button>
    </view>
  </view>
</view>
