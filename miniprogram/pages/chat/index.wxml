<view class="desktop">
  <view class="window-frame chat-main">
    <view class="title-bar chat-title-bar">
      <view class="title-text">
        <text>ğŸ’™ æ°´æ™¶ä¹‹æ‹ ğŸ’™ (åœ¨çº¿) - å¯¹è¯ä¸­</text>
      </view>
      <view class="btn-close" bindtap="goBack">Ã—</view>
    </view>

    <view class="menu-bar">
      <text>æ–‡ä»¶(F)</text>
      <text>ç¼–è¾‘(E)</text>
      <text>è§†é¢‘(V)</text>
      <text>å·¥å…·(T)</text>
    </view>

    <scroll-view class="chat-history" scroll-y="true" scroll-into-view="{{scrollToView}}">
      <block wx:for="{{chatList}}" wx:key="index">
        <view class="chat-item left" wx:if="{{item.type === 'ai'}}">
          <view class="avatar ai-avatar">O</view>
          <view class="bubble ai-bubble">
            <text user-select="true">{{item.content}}</text>
          </view>
        </view>

        <view class="chat-item right" wx:else>
          <view class="bubble my-bubble">
            <text user-select="true">{{item.content}}</text>
          </view>
          <view class="avatar my-avatar">M</view>
        </view>
      </block>
      <view id="msg-bottom" style="height: 1px;"></view>
    </scroll-view>

    <view class="chat-toolbar">
      <text>å­—ä½“(F)</text> <text>è¡¨æƒ…(I)</text> <text>éœ‡åŠ¨(N)</text>
    </view>

    <view class="chat-input-area">
      <textarea 
        class="chat-input" 
        value="{{chatInput}}" 
        bindinput="onChatInput"
        bindconfirm="sendMessage"
        cursor-spacing="20"
        confirm-type="send"
      ></textarea>
      <view class="chat-actions">
        <view class="retro-btn sm-btn" bindtap="goBack">å…³é—­(C)</view>
        <view class="retro-btn sm-btn primary" bindtap="sendMessage">å‘é€(S)</view>
      </view>
    </view>
  </view>
</view>