<view class="win98-window">
  <!-- 1. 标题栏 Title Bar -->
  <view class="title-bar">
    <view class="title-icon">🌐</view>
    <view class="title-text">千禧浏览器</view>
    <view class="title-controls">
      <view class="control-btn minimize">_</view>
      <view class="control-btn maximize">□</view>
      <view class="control-btn close" bindtap="goBack">×</view>
    </view>
  </view>

  <!-- 2. 工具栏 Toolbar -->
  <view class="toolbar">
    <view class="tool-btn {{!canGoBack ? 'disabled' : ''}}" bindtap="onBrowserBack">⬅</view>
    <view class="tool-btn {{!canGoForward ? 'disabled' : ''}}" bindtap="onBrowserForward">➡</view>
    <view class="tool-btn" bindtap="onRefresh">🔄</view>
    <view class="tool-btn" bindtap="goHome">🏠</view>
    <view class="tool-separator"></view>
    <view class="address-input-wrapper">
      <input class="address-input" value="{{currentUrl}}" disabled="true" />
    </view>
  </view>

  <!-- 3. 视口 Viewport -->
  <view class="viewport">

    <!-- 加载条 -->
    <view class="loading-bar-container" wx:if="{{isLoading}}">
      <view class="loading-text">正在加载...</view>
      <view class="loading-track">
        <view class="loading-progress" style="width: {{progress}}%"></view>
      </view>
    </view>

    <!-- 内容区 -->
    <scroll-view scroll-y="true" class="web-content" wx:if="{{!isLoading}}">

      <!-- ================= SCENE A: Portal Home (主页) ================= -->
      <block wx:if="{{currentUrl === 'http://www.time-machine.com/portal'}}">
        <view class="page-home">
          <view class="hero-section">
            <view class="blink-text">★ 欢迎来到 2000 年 ★</view>
            <image class="hero-logo" mode="aspectFit" src="../../images/borders/border_cyber.png"></image>
            <text class="daily-quote">"{{dailyQuote}}"</text>
          </view>

          <view class="retro-hr"></view>

          <view class="nav-links">
            <view class="section-title">导航目录</view>

            <!-- 游戏入口：原生跳转 -->
            <view class="link-item" bindtap="onLinkTap" data-path="/pages/qcio/farm/index">
              <text class="link-icon">🌱</text>
              <view class="link-text">
                <text class="link-title">QCIO农场</text>
                <text class="link-desc">种植作物，收获经验！</text>
              </view>
            </view>

            <!-- 其他功能：原生跳转 -->
            <view class="link-item" bindtap="onLinkTap" data-path="/pages/chat/index">
              <text class="link-icon">💬</text>
              <view class="link-text">
                <text class="link-title">AI 聊天室</text>
                <text class="link-desc">与机器精灵对话。</text>
              </view>
            </view>

             <view class="link-item" bindtap="onLinkTap" data-path="/pages/translator/index">
              <text class="link-icon">🈂️</text>
              <view class="link-text">
                <text class="link-title">万能翻译器</text>
                <text class="link-desc">解码外星语言。</text>
              </view>
            </view>
          </view>
        </view>
      </block>

    </scroll-view>

    <!-- 底部状态栏 -->
    <view class="status-bar">
      <view class="status-text">{{statusText}}</view>
      <view class="status-progress-bar" style="width: {{progress}}%"></view>
    </view>
  </view>
</view>