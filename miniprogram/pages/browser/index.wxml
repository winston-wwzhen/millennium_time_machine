<view class="win98-window">
  <!-- 1. æ ‡é¢˜æ  Title Bar -->
  <view class="title-bar">
    <view class="title-icon">ğŸŒ</view>
    <view class="title-text">Millennium Explorer</view>
    <view class="title-controls">
      <view class="control-btn minimize">_</view>
      <view class="control-btn maximize">â–¡</view>
      <view class="control-btn close" bindtap="goBack">Ã—</view>
    </view>
  </view>

  <!-- 2. å·¥å…·æ  Toolbar -->
  <view class="toolbar">
    <view class="tool-btn {{!canGoBack ? 'disabled' : ''}}" bindtap="onBrowserBack">â¬…</view>
    <view class="tool-btn {{!canGoForward ? 'disabled' : ''}}" bindtap="onBrowserForward">â¡</view>
    <view class="tool-btn" bindtap="onRefresh">ğŸ”„</view>
    <view class="tool-btn" bindtap="goHome">ğŸ </view>
    <view class="tool-separator"></view>
    <view class="address-input-wrapper">
      <input class="address-input" value="{{currentUrl}}" disabled="true" />
    </view>
  </view>

  <!-- 3. è§†å£ Viewport -->
  <view class="viewport">
    
    <!-- åŠ è½½æ¡ -->
    <view class="loading-bar-container" wx:if="{{isLoading}}">
      <view class="loading-text">Downloading...</view>
      <view class="loading-track">
        <view class="loading-progress" style="width: {{progress}}%"></view>
      </view>
    </view>

    <!-- å†…å®¹åŒº -->
    <scroll-view scroll-y="true" class="web-content" wx:if="{{!isLoading}}">
      
      <!-- ================= SCENE A: Portal Home (ä¸»é¡µ) ================= -->
      <block wx:if="{{currentUrl === 'http://www.time-machine.com/portal'}}">
        <view class="page-home">
          <view class="hero-section">
            <view class="blink-text">â˜… WELCOME TO 2000 â˜…</view>
            <image class="hero-logo" mode="aspectFit" src="../../images/borders/border_cyber.png"></image>
            <text class="daily-quote">"{{dailyQuote}}"</text>
          </view>

          <view class="retro-hr"></view>

          <view class="nav-links">
            <view class="section-title">Directory</view>
            
            <!-- æ¸¸æˆå…¥å£ï¼šå†…éƒ¨è·³è½¬ -->
            <view class="link-item special-link" bindtap="onLinkTap" data-url="http://galaxy.farm">
              <text class="link-icon">ğŸŒ±</text>
              <view class="link-text">
                <text class="link-title">My Homepage Garden</text>
                <text class="link-desc">Grow plants & Visit friends!</text>
              </view>
            </view>

            <!-- å…¶ä»–åŠŸèƒ½ï¼šåŸç”Ÿè·³è½¬ -->
            <view class="link-item" bindtap="onLinkTap" data-path="/pages/chat/index">
              <text class="link-icon">ğŸ’¬</text>
              <view class="link-text">
                <text class="link-title">AI Chat Room</text>
                <text class="link-desc">Talk to the machine spirit.</text>
              </view>
            </view>

             <view class="link-item" bindtap="onLinkTap" data-path="/pages/translator/index">
              <text class="link-icon">ğŸˆ‚ï¸</text>
              <view class="link-text">
                <text class="link-title">Universal Translator</text>
                <text class="link-desc">Decode alien languages.</text>
              </view>
            </view>
          </view>
        </view>
      </block>

      <!-- ================= SCENE B: Game Component ================= -->
      <block wx:if="{{currentUrl === 'http://galaxy.farm'}}">
        <farm-game bind:statuschange="onGameStatusChange"></farm-game>
      </block>

    </scroll-view>

    <!-- åº•éƒ¨çŠ¶æ€æ  -->
    <view class="status-bar">
      <view class="status-text">{{statusText}}</view>
      <view class="status-progress-bar" style="width: {{progress}}%"></view>
    </view>
  </view>
</view>