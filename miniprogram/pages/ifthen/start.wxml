<!-- 如果当时.exe - 人生模拟器 -->
<view class="desktop">
  <view class="win98-window">
    <view class="win98-title-bar">
      <view class="win98-title-text">如果当时.exe</view>
      <view class="win98-title-controls">
        <button class="win98-btn-minimize">_</button>
        <button class="win98-btn-maximize">□</button>
        <button class="win98-btn-close" bindtap="goHome">×</button>
      </view>
    </view>

    <view class="win98-window-body">
      <!-- 游戏标题区域 -->
      <view class="game-header">
        <view class="game-icon">🎮</view>
        <view class="game-title">
          <text class="title-main">如果当时.exe</text>
          <text class="title-sub">Life Simulator</text>
        </view>
      </view>

      <!-- 年份选择 -->
      <view class="setting-section">
        <view class="setting-label">选择出生年份</view>
        <view class="year-selector">
          <view class="year-display">
            <text class="year-value">{{birthYear}}</text>
            <text class="year-unit">年</text>
          </view>
          <view class="year-slider-row">
            <view class="year-btn year-btn-minus {{birthYear <= minYear ? 'disabled' : ''}}" bindtap="decreaseYear">-</view>
            <slider
              class="year-slider"
              min="{{minYear}}"
              max="{{maxYear}}"
              value="{{birthYear}}"
              step="{{yearStep}}"
              bindchange="onYearChange"
              activeColor="#000080"
              backgroundColor="#c0c0c0"
              block-size="20"
              show-value="{{false}}"
            />
            <view class="year-btn year-btn-plus {{birthYear >= maxYear ? 'disabled' : ''}}" bindtap="increaseYear">+</view>
          </view>
          <view class="year-range">
            <text>{{minYear}}</text>
            <text>{{maxYear}}</text>
          </view>
        </view>
        <view class="age-preview">
          <text>2005年时你的年龄：{{2005 - birthYear}}岁</text>
        </view>
      </view>

      <!-- 性别选择 -->
      <view class="setting-section">
        <view class="setting-label">选择性别</view>
        <view class="gender-selector">
          <view
            class="gender-option {{gender === 'male' ? 'selected' : ''}}"
            data-gender="male"
            bindtap="selectGender"
          >
            <text class="gender-icon">♂</text>
            <text class="gender-text">男性</text>
          </view>
          <view
            class="gender-option {{gender === 'female' ? 'selected' : ''}}"
            data-gender="female"
            bindtap="selectGender"
          >
            <text class="gender-icon">♀</text>
            <text class="gender-text">女性</text>
          </view>
        </view>
      </view>

      <!-- 游戏说明 -->
      <view class="info-section">
        <text class="info-title">如果当时.exe</text>
        <text class="info-desc">"如果当时我做了不同的选择，现在会不会不一样？"</text>
        <text class="info-detail">穿越回2005年，重走青春路，在每一个十字路口做出你的选择</text>
        <text class="info-note">• 2005-2025年真实历史事件 • 80+种人生结局等你发现</text>
      </view>
    </view>

    <!-- 按钮区域 -->
    <view class="action-bar">
      <button class="win98-btn-std win98-btn-primary" bindtap="startGame" loading="{{isLoading}}">
        开始穿越
      </button>
      <button class="win98-btn-std" bindtap="toggleInstructions">
        玩法说明
      </button>
      <button class="win98-btn-std" bindtap="viewHistory">
        📊 结局收集
      </button>
    </view>

    <!-- 状态栏 -->
    <view class="status-bar">
      <text>Ready</text>
    </view>
  </view>
</view>

<!-- 玩法说明弹窗 -->
<view class="instructions-overlay {{showInstructions ? 'visible' : ''}}" wx:if="{{showInstructions}}" bindtap="toggleInstructions" catchtap="stopPropagation">
  <view class="instructions-window" catchtap="stopPropagation">
    <view class="win98-title-bar">
      <view class="win98-title-text">游戏说明</view>
      <view class="win98-title-controls">
        <button class="win98-btn-close" bindtap="toggleInstructions">×</button>
      </view>
    </view>

    <view class="instructions-body">
      <view class="instructions-section">
        <text class="instructions-heading">🎮 游戏简介</text>
        <text class="instructions-text">"如果当时我做了不同的选择，现在会不会不一样？"</text>
        <text class="instructions-text">穿越回2005年，重走青春路，在每一个十字路口做出你的选择。</text>
      </view>

      <view class="instructions-section">
        <text class="instructions-heading">📖 玩法说明</text>
        <text class="instructions-text">1. 选择你的出生年份和性别</text>
        <text class="instructions-text">2. 从2005年开始，经历20年人生旅程</text>
        <text class="instructions-text">3. 遇到历史大事件时，需要做出选择</text>
        <text class="instructions-text">4. 你的选择会影响人物属性（技术、社交、财富等）</text>
        <text class="instructions-text">5. 最终属性决定了你的人生结局</text>
      </view>

      <view class="instructions-section">
        <text class="instructions-heading">🎯 游戏目标</text>
        <text class="instructions-text">• 探索2005-2025年间的真实历史事件</text>
        <text class="instructions-text">• 发现80+种不同的人生结局</text>
        <text class="instructions-text">• 收集所有结局，解锁不同人生可能</text>
      </view>

      <view class="instructions-section">
        <text class="instructions-heading">💡 提示</text>
        <text class="instructions-text">• 不同年龄会有不同的事件</text>
        <text class="instructions-text">• 仔细阅读历史背景，做出明智选择</text>
        <text class="instructions-text">• 属性会影响可选择的结局</text>
        <text class="instructions-text">• 点击时光轴可以跳过打字动画</text>
      </view>

      <view class="instructions-actions">
        <button class="win98-btn-std win98-btn-primary" bindtap="toggleInstructions">
          知道了
        </button>
      </view>
    </view>
  </view>
</view>
